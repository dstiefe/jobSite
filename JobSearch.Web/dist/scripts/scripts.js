function configState(e,t,n){n.debugInfoEnabled(!0),t.otherwise(function(e){var t=e.get("$state");t.go("searchjobs")}),e.state("dashboard",{url:"/dashboard?jobId&resumeId&messageshow",templateUrl:"views/dashboard.html",data:{pageTitle:"Dashboard",params:{jobId:{squash:!0},resumeId:{squash:!0},messageshow:{squash:!0}}}}).state("logout",{url:"/logout",controller:["$state","$rootScope","AuthService",function(e,t,n){n.logOut(),e.go("login")}],data:{pageTitle:"logout"}}).state("searchjobs",{url:"/searchjobs",templateUrl:"views/searchjobs.html",data:{pageTitle:"Search Jobs",permissions:{except:["Admin"],redirectTo:"dashboard"}}}).state("jobmanagement",{url:"/jobmanagement/:id",templateUrl:"views/jobmanagement.html",data:{pageTitle:"Job Management",permissions:{only:["Admin"],redirectTo:"login"}}}).state("jobslist",{url:"/jobslist",templateUrl:"views/jobslist.html",data:{pageTitle:"Jobs List",permissions:{only:["Admin"],redirectTo:"login"}}}).state("login",{url:"/login",templateUrl:"views/login.html",data:{pageTitle:"Login"}}).state("associate",{url:"/associate",templateUrl:"views/associate.html",data:{pageTitle:"Associate"}}).state("register",{url:"/register",templateUrl:"views/login.html",data:{pageTitle:"Register"}}).state("viewjobdetails",{url:"/viewjobdetails?id&referral&type",templateUrl:"views/viewjobdetails.html",data:{pageTitle:"Job Details"},params:{id:{squash:!0},referral:{squash:!0},type:{squash:!0}}}).state("applyjob",{url:"/applyjob",templateUrl:"views/applyjob.html",data:{pageTitle:"Apply Job",permissions:{only:["User"],redirectTo:"login"}}}).state("applicants",{url:"/applicants/:id?resumeId&messageshow",templateUrl:"views/applicants.html",data:{pageTitle:"Applicants",params:{resumeId:{squash:!0},messageshow:{squash:!0}}}}).state("searchresumeshome",{url:"/searchresumeshome",templateUrl:"views/SearchResumesHome.html",data:{pageTitle:"Search Resumes Home",permissions:{only:["Admin"],redirectTo:"login"}}}).state("searchresumes",{url:"/searchresumes",templateUrl:"views/SearchResumes.html",data:{pageTitle:"Search Resumes",permissions:{only:["Admin"],redirectTo:"login"}}}).state("resetpassword",{url:"/resetpassword",templateUrl:"views/resetpassword.html",data:{pageTitle:"Reset password"}}).state("resetpasswordverify",{url:"/resetpasswordverify",templateUrl:"views/resetpasswordverify.html",data:{pageTitle:"Change password"}}).state("screenings",{url:"/screenings",templateUrl:"views/Screenings.html",data:{pageTitle:"Screenings",permissions:{only:["Admin"],redirectTo:"login"}}}).state("createscreening",{url:"/screenings/create",templateUrl:"views/CreateScreening.html",data:{pageTitle:"Create Screening",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editscreening",{url:"/screenings/:id/edit",templateUrl:"views/EditScreening.html",data:{pageTitle:"Edit Screening",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editscreeninginfo",{url:"/screenings/:id/info/edit",templateUrl:"views/CreateScreening.html",data:{pageTitle:"Edit Screening Info",permissions:{only:["Admin"],redirectTo:"login"}}}).state("createscreeningquestion",{url:"/screenings/:id/questions/create",templateUrl:"views/CreateScreeningQuestion.html",params:{type:"createscreening"},data:{pageTitle:"Create Screening Question",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editscreeningquestion",{url:"/screenings/:id/questions/:questionId/edit",templateUrl:"views/CreateScreeningQuestion.html",params:{type:"createscreening"},data:{pageTitle:"Edit Screening Question",permissions:{only:["Admin"],redirectTo:"login"}}}).state("starttestscreening",{url:"/jobs/:jobId/resumes/:id/screenings/:screeningId/start",templateUrl:"views/StartTestScreening.html",data:{pageTitle:"Start screening tests"}}).state("testscreening",{url:"/jobs/:jobId/resumes/:id/screenings/:screeningId/test",templateUrl:"views/TestScreening.html",data:{pageTitle:"Screening test",permissions:{only:["User"],redirectTo:"login"}}}).state("finishtestscreening",{url:"/resumes/screenings/finish",templateUrl:"views/FinishTestScreening.html",data:{pageTitle:"Finish screening tests",permissions:{only:["User"],redirectTo:"login"}}}).state("resumes",{url:"/resumes",templateUrl:"views/Resumes.html",data:{pageTitle:"Resumes",permissions:{only:["User"],redirectTo:"login"}}}).state("referrals",{url:"/references",templateUrl:"views/Referrals.html",data:{pageTitle:"References",permissions:{only:["Admin"],redirectTo:"login"}}}).state("createreferral",{url:"/references/create",templateUrl:"views/CreateReferral.html",data:{pageTitle:"Create Reference",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editreferral",{url:"/references/:id/edit",templateUrl:"views/EditReferral.html",data:{pageTitle:"Edit Reference",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editreferralinfo",{url:"/references/:id/info/edit",templateUrl:"views/CreateReferral.html",data:{pageTitle:"Edit Reference Info",permissions:{only:["Admin"],redirectTo:"login"}}}).state("createreferralquestion",{url:"/references/:id/questions/create",templateUrl:"views/CreateReferralQuestion.html",params:{type:"createreferral"},data:{pageTitle:"Create Reference Question",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editreferralquestion",{url:"/references/:id/questions/:questionId/edit",templateUrl:"views/CreateReferralQuestion.html",params:{type:"createreferral"},data:{pageTitle:"Edit Reference Question",permissions:{only:["Admin"],redirectTo:"login"}}}).state("download_resume",{url:"/download_resume/:id",templateUrl:"views/DownloadResume.html",data:{pageTitle:"Download resume",permissions:{only:["Admin","User"],redirectTo:"login"}}}).state("assignscreening",{url:"/screenings/:id/assign",templateUrl:"views/ScreeningAssign.html",data:{pageTitle:"Screening Assign",permissions:{only:["Admin"],redirectTo:"login"}}}).state("assignreferral",{url:"/references/:id/assign",templateUrl:"views/ReferralAssign.html",data:{pageTitle:"Reference Assign",permissions:{only:["Admin"],redirectTo:"login"}}}).state("starttestjobreferral",{url:"/jobs/:jobId/resumes/:resumeId/references/:jobReferralId/start?reference_friend_id",templateUrl:"views/StartTestJobReferral.html",params:{reference_friend_id:{squash:!0},userName:""},data:{pageTitle:"Start references tests"}}).state("testsjobreferral",{url:"/jobs/:jobId/resumes/:resumeId/references/:jobReferralId/test",templateUrl:"views/TestJobReferral.html",data:{pageTitle:"Reference test",permissions:{only:["User"],redirectTo:"login"}}}).state("finishestsjobreferral",{url:"/jobs/:jobId/resumes/:resumeId/references/:jobReferralId/test/finish",templateUrl:"views/FinishTestJobReferral.html",data:{pageTitle:"Finish test reference",permissions:{only:["User"],redirectTo:"login"}}}).state("traitify",{url:"/jobs/:jobId/resumes/:resumeId/traitify/:traitifyId/test",templateUrl:"views/Traitify.html",data:{pageTitle:"Traitify test",permissions:{only:["User"],redirectTo:"login"}}}).state("traitifystart",{url:"/jobs/:jobId/resumes/:resumeId/traitify/:traitifyId/start",templateUrl:"views/TraitifyStart.html",data:{pageTitle:"Traitify start test"}}).state("traitifyfinish",{url:"/jobs/:jobId/resumes/:resumeId/traitify/:traitifyId/finish",templateUrl:"views/TraitifyFinish.html",data:{pageTitle:"Traitify finish test",permissions:{only:["User"],redirectTo:"login"}}}).state("interviews",{url:"/interviews",templateUrl:"views/Interviews.html",data:{pageTitle:"Interviews",permissions:{only:["Admin"],redirectTo:"login"}}}).state("createinterview",{url:"/interviews/create",templateUrl:"views/CreateInterview.html",data:{pageTitle:"Create Interview",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editinterview",{url:"/interviews/:id/edit",templateUrl:"views/EditInterview.html",data:{pageTitle:"Edit Interview",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editinterviewinfo",{url:"/interviews/:id/info/edit",templateUrl:"views/CreateInterview.html",data:{pageTitle:"Edit Interview Info",permissions:{only:["Admin"],redirectTo:"login"}}}).state("createinterviewquestion",{url:"/interviews/:id/questions/create",templateUrl:"views/CreateInterviewQuestion.html",params:{type:"createinterview"},data:{pageTitle:"Create Interview Question",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editinterviewquestion",{url:"/interviews/:id/questions/:questionId/edit",templateUrl:"views/CreateInterviewQuestion.html",params:{type:"createinterview"},data:{pageTitle:"Edit Interview Question",permissions:{only:["Admin"],redirectTo:"login"}}}).state("assigninterview",{url:"/interviews/:id/assign",templateUrl:"views/InterviewAssign.html",data:{pageTitle:"Interview Assign",permissions:{only:["Admin"],redirectTo:"login"}}}).state("testinterview",{url:"/jobs/:jobId/resumes/:resumeId/interviews/:interviewId/test",templateUrl:"views/TestInterview.html",data:{pageTitle:"Interview test",permissions:{only:["Admin"],redirectTo:"login"}}}).state("clients",{url:"/clients",templateUrl:"views/Clients.html",data:{pageTitle:"Clients",permissions:{only:["Admin"],redirectTo:"login"}}}).state("createclient",{url:"/clients/create",templateUrl:"views/CreateClient.html",data:{pageTitle:"Create Client",permissions:{only:["Admin"],redirectTo:"login"}}}).state("editclient",{url:"/clients/:id/edit",templateUrl:"views/CreateClient.html",data:{pageTitle:"Edit Client",permissions:{only:["Admin"],redirectTo:"login"}}}).state("bulkemails",{url:"/messages/bulk",templateUrl:"views/MessagesBulk.html",data:{pageTitle:"Bulk Message",permissions:{only:["Admin"],redirectTo:"login"}}})}function fixWrapperHeight(){var e=62,t=$("#navigation").height(),n=$(".content").height();t>n&&$("#wrapper").css("min-height",t+"px"),t>n&&t<$(window).height()&&$("#wrapper").css("min-height",$(window).height()-e+"px"),n>t&&n<$(window).height()&&$("#wrapper").css("min-height",$(window).height()-e+"px")}function setBodySmall(){$(this).width()<769?$("body").addClass("page-small"):($("body").removeClass("page-small"),$("body").removeClass("show-sidebar"))}function pwCheck(){return{require:"ngModel",link:function(e,t,n,r){var s="#"+n.pwCheck;t.add(s).on("keyup",function(){e.$apply(function(){var e=t.val()===$(s).val();r.$setValidity("pwmatch",e)})})}}}function backHandler(e,t){return{restrict:"A",link:function(e,n,r){n.bind("click",function(){t.back()})}}}function fileUploadHandler(){return{restrict:"A",link:function(e,t,n){var r=e.$eval(n.customOnChange);t.bind("change",r)}}}function ngEnterHandler(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter,{event:t})}),t.preventDefault())})}}function pageTitle(e,t){return{link:function(n,r){var s=function(e,n,s,o,i){var a="Jobs Search";n.data&&n.data.pageTitle&&(a="Jobs Search | "+n.data.pageTitle),t(function(){r.text(a)})};e.$on("$stateChangeStart",s)}}}function sideNavigation(e){return{restrict:"A",link:function(e,t){t.metisMenu();var n=$('#side-menu a:not([href$="\\#"])');n.click(function(){$(window).width()<769&&$("body").toggleClass("show-sidebar")})}}}function minimalizaMenu(e){return{restrict:"EA",template:'<div class="header-link hide-menu" ng-click="minimalize()"><i class="fa fa-bars"></i></div>',controller:["$scope","$element",function(e,t){e.minimalize=function(){$(window).width()<769?$("body").toggleClass("show-sidebar"):$("body").toggleClass("hide-sidebar")}}]}}function sparkline(){return{restrict:"A",scope:{sparkData:"=",sparkOptions:"="},link:function(e,t,n){e.$watch(e.sparkData,function(){r()}),e.$watch(e.sparkOptions,function(){r()});var r=function(){$(t).sparkline(e.sparkData,e.sparkOptions)}}}}function icheck(e){return{restrict:"A",require:"ngModel",link:function(t,n,r,s){return e(function(){var e;return e=r.value,t.$watch(r.ngModel,function(e){$(n).iCheck("update")}),$(n).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChanged",function(o){return"checkbox"===$(n).attr("type")&&r.ngModel&&t.$apply(function(){return s.$setViewValue(o.target.checked)}),"radio"===$(n).attr("type")&&r.ngModel?t.$apply(function(){return s.$setViewValue(e)}):void 0})})}}}function panelTools(e){return{restrict:"A",scope:!0,templateUrl:"views/common/panel_tools.html",controller:["$scope","$element",function(t,n){t.showhide=function(){var t=n.closest("div.hpanel"),r=n.find("i:first"),s=t.find("div.panel-body"),o=t.find("div.panel-footer");s.slideToggle(300),o.slideToggle(200),r.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),t.toggleClass("").toggleClass("panel-collapse"),e(function(){t.resize(),t.find("[id^=map-]").resize()},50)},t.closebox=function(){var e=n.closest("div.hpanel");e.remove()}}]}}function panelToolsFullscreen(e){return{restrict:"A",scope:!0,templateUrl:"views/common/panel_tools_fullscreen.html",controller:["$scope","$element",function(t,n){t.showhide=function(){var t=n.closest("div.hpanel"),r=n.find("i:first"),s=t.find("div.panel-body"),o=t.find("div.panel-footer");s.slideToggle(300),o.slideToggle(200),r.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),t.toggleClass("").toggleClass("panel-collapse"),e(function(){t.resize(),t.find("[id^=map-]").resize()},50)},t.closebox=function(){var e=n.closest("div.hpanel");e.remove()},t.fullscreen=function(){var e=n.closest("div.hpanel"),t=n.find("i:first");$("body").toggleClass("fullscreen-panel-mode"),t.toggleClass("fa-expand").toggleClass("fa-compress"),e.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}}]}}function smallHeader(){return{restrict:"A",scope:!0,controller:["$scope","$element",function(e,t){e.small=function(){var e=t.find("i:first"),n=t.find("#hbreadcrumb");t.toggleClass("small-header"),n.toggleClass("m-t-lg"),e.toggleClass("fa-arrow-up").toggleClass("fa-arrow-down")}}]}}function animatePanel(e,t){return{restrict:"A",link:function(n,r,s){var o=0,i=.06,a=Math.abs(i)+o;t.current.name;s.effect||(s.effect="zoomIn"),i=s.delay?s.delay/10:.06,s.child?s.child="."+s.child:s.child=".row > div";var l=r.find(s.child);l.addClass("opacity-0");l.length*i*1e3+700;e(function(){l=r.find(s.child),l.addClass("stagger").addClass("animated-panel").addClass(s.effect);var t=l.length+10,n=t*i*1e4/10;l.each(function(e,t){a+=i;var n=Math.round(10*a)/10;$(t).css("animation-delay",n+"s"),$(t).removeClass("opacity-0")}),e(function(){$(".stagger").css("animation",""),$(".stagger").removeClass(s.effect).removeClass("animated-panel").removeClass("stagger")},n)})}}}function landingScrollspy(){return{restrict:"A",link:function(e,t,n){t.scrollspy({target:".navbar-fixed-top",offset:80})}}}function appCtrl(e,t,n){t.checkOne=!0,t.barProfileData=[5,6,7,2,0,4,2,4,5,7,2,4,12,11,4],t.barProfileOptions={type:"bar",barWidth:7,height:"30px",barColor:"#62cb31",negBarColor:"#53ac2a"},t.chartIncomeData=[{label:"line",data:[[1,10],[2,26],[3,16],[4,36],[5,32],[6,51]]}],t.chartIncomeOptions={series:{lines:{show:!0,lineWidth:0,fill:!0,fillColor:"#64cc34"}},colors:["#62cb31"],grid:{show:!1},legend:{show:!1}},t.dynamicTooltip="Hello, World!",t.htmlTooltip="I've been made <b>bold</b>!",t.dynamicTooltipText="Dynamic",t.dynamicPopover="Hello, World!",t.dynamicPopoverTitle="Title",t.totalItems=64,t.currentPage=4,t.setPage=function(e){t.currentPage=e},t.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],t.getLocation=function(t){return e.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:t,sensor:!1}}).then(function(e){return e.data.results.map(function(e){return e.formatted_address})})},t.rate=7,t.max=10,t.hoveringOver=function(e){t.overStar=e,t.percent=100*(e/this.max)},t.groups=[{title:"Dynamic Group Header - 1",content:"A wonderful serenity has taken possession of my entire soul, like these sweet mornings of spring which I enjoy with my whole heart. I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine. "},{title:"Dynamic Group Header - 2",content:"A wonderful serenity has taken possession of my entire soul, like these sweet mornings of spring which I enjoy with my whole heart. I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine. "}],t.oneAtATime=!0;var r=[[0,55],[1,48],[2,40],[3,36],[4,40],[5,60],[6,50],[7,51]],s=[[0,56],[1,49],[2,41],[3,38],[4,46],[5,67],[6,57],[7,59]];t.chartUsersData=[r,s],t.chartUsersOptions={series:{splines:{show:!0,tension:.4,lineWidth:1,fill:.4}},grid:{tickColor:"#f0f0f0",borderWidth:1,borderColor:"f0f0f0",color:"#6a6c6f"},colors:["#62cb31","#efefef"]},t.PieChart={data:[1,5],options:{fill:["#62cb31","#edf0f5"]}},t.PieChart2={data:[226,360],options:{fill:["#62cb31","#edf0f5"]}},t.PieChart3={data:[.52,1.561],options:{fill:["#62cb31","#edf0f5"]}},t.PieChart4={data:[1,4],options:{fill:["#62cb31","#edf0f5"]}},t.PieChart5={data:[226,134],options:{fill:["#62cb31","#edf0f5"]}},t.PieChart6={data:[.52,1.041],options:{fill:["#62cb31","#edf0f5"]}},t.BarChart={data:[5,3,9,6,5,9,7,3,5,2],options:{fill:["#dbdbdb","#62cb31"]}},t.LineChart={data:[5,9,7,3,5,2,5,3,9,6,5,9,4,7,3,2,9,8,7,4,5,1,2,9,5,4,7],options:{fill:"#62cb31",stroke:"#62cb31",width:64}},t.stanimation="bounceIn",t.runIt=!0,t.runAnimation=function(){t.runIt=!1,n(function(){t.runIt=!0},100)}}function ApplyJobController(e,t,n,r,s,o,i,a,l){var c=o.API_BASE_PATH;e.jobId=i,e.includeCoverLetter=!1,e.selectedResume="",e.resumeFileUrl="",e.resumeOriginalFilename="",e.loading=!1,a.authentication.isAuth||n.path("/login"),s.getMyResumes().then(function(t){e.resumes=t.data},function(e){console.log(e.data.message)}),e.role=a.authentication.isAdministrator?"Admin":"User",l.accountInfo().then(function(t){e.accountFirstName=t.data.firstName,e.accountLastName=t.data.lastName,e.accountEmail=t.data.email},function(e){console.log(e.data.message)}),e.step=1,e.wizard={show:function(t){e.step=t},next:function(){e.step++},prev:function(){e.step--}},e.uploadFile=function(n){e.loading=!0;var r=n.target.files[0],s=c+"resumes/upload",o=new FormData;o.append("file",r),t.post(s,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(t){e.resumeFileUrl=t.storageLocationNative,e.resumeOriginalFilename=t.originalFilename,e.wizard.next(),e.loading=!1}).error(function(t){e.loading=!1,alert("Resume upload failed")})},e.onSubmit=function(){e.loading=!0;var t={note:e.coverLetterNote,storageLocationNative:e.resumeFileUrl,resumeId:e.selectedResume,originalFilename:e.resumeOriginalFilename,firstName:e.accountFirstName,lastName:e.accountLastName,email:e.accountEmail};e.resumeFileUrl?s.applyToJob(e.jobId,t).then(function(t){var n=t.data;e.jobAppliedDate=n.applyDate,e.step=3,e.$parent.isApplied=!0,e.loading=!1},function(t){console.log(t.data.message),e.loading=!1}):s.applyToJobByExistResume(e.jobId,t).then(function(t){var n=t.data;e.jobAppliedDate=n.applyDate,e.step=3,e.$parent.isApplied=!0,e.loading=!1},function(t){console.log(t.data.message),e.loading=!1})},e.onClose=function(){r.close()}}var apiBasePath="http://ec2-52-90-116-49.compute-1.amazonaws.com:81/jobapi_dev/api/v1/",clientId="P600Us6Y476QiK331u5yEzb22dpX_y6NS75!9I-a";!function(){angular.module("Jobsite",["ui.router","ngSanitize","ui.bootstrap","ngAnimate","textAngular","xeditable","ui.autocomplete","permission","timer","bcherny/formatAsCurrency","angular-loading-bar","angularSpectrumColorpicker","luegg.directives","rzModule","ngCookies"]).constant("RESOURCES",function(){var e=[{value:"FullTime",name:"Full Time"},{value:"PartTime",name:"Part Time"},{value:"Contract",name:"Contract"},{value:"Project",name:"Project"}],t=[{value:"MultipleChoice",name:"Multiple/Choice"},{value:"TrueFalse",name:"True/False"},{value:"FillIn",name:"Fill In"},{value:"LikertScale",name:"Likert Scale"}],n=[{value:"MultipleChoice",name:"Multiple/Choice"},{value:"TrueFalse",name:"True/False"},{value:"FillIn",name:"Fill In"},{value:"LikertScale",name:"Likert Scale"},{value:"Grade",name:"Grade"}],r=[{value:"Colleague",name:"Colleague"},{value:"DirectSupervisor",name:"Direct Supervisor"},{value:"SrExecutive",name:"Sr. Executive"},{value:"YourDirectReport",name:"Your Direct Report"},{value:"CharacterReference ",name:"Character Reference"}],s=[{value:"Normal",name:"Normal"},{value:"Inverse",name:"Inverse"}];return{EMPLOYEE_TYPES:e,SCREENING_QUESTION_TYPES:t,REFERENCES_QUESTION_TYPES:n,WORKING_RELATIONSHIP_TYPES:r,GRADE_QUESTION_SUB_TYPES:s,API_BASE_PATH:apiBasePath,CLIENT_ID:clientId,TRAITIFY_PUBLIC_KEY:"m8rrmi54uig26dapmnv6bstak9",TRAITIFY_HOST:"api-sandbox.traitify.com",TRAITIFY_VERSION:"v1"}}()).config(["cfpLoadingBarProvider",function(e){e.includeSpinner=!0,e.includeBar=!1,e.spinnerTemplate='<div id="outer" style="width:100%;position: absolute; top: 63px; "><div class="progress" style=" margin: 0 auto;  width: 200px; height: 10px; z-index: 9999999999;"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"><span class="sr-only"></span></div></div></div>'}]).config(["$provide",function(e){e.decorator("taOptions",["taRegisterTool","$delegate",function(e,t){return t.toolbar=[[],["bold","italics","underline","ul","ol"],["justifyCenter"],["insertImage","insertLink","insertVideo"],["fontColor"]],e("fontColor",{display:"<div spectrum-colorpicker ng-model='color' on-change='!!color && action(color)' format='\"hex\"' options='options'></div>",action:function(e){var t=this;return this.$editor().wrapSelection?this.$editor().wrapSelection("foreColor",e):void setTimeout(function(){t.action(e)},100)},iconclass:"fa fa-font",options:{replacerClassName:"fa fa-font",showButtons:!0},color:"#000"}),t}])}])}(),configState.$inject=["$stateProvider","$urlRouterProvider","$compileProvider"],angular.module("Jobsite").config(configState).config(["$httpProvider",function(e){e.interceptors.push("AuthInterceptorService")}]).run(["$rootScope","$location","$state","editableOptions","Permission","AuthService",function(e,t,n,r,s,o){e.numberWithCommas=function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},o.fillAuthData(),e.$state=n,r.theme="bs3",s.defineRole("anonymous",function(e){return!o.authentication.isAuth}).defineRole("User",function(e){return o.authentication.isAuth&&o.authentication.isUser}).defineRole("Admin",function(e){return o.authentication.isAuth&&o.authentication.isAdministrator});var i=[];e.$on("$locationChangeSuccess",function(e,n,r,s,o){t.$$absUrl!=r&&(i.push(t.$$path),i.length>5&&(i=i.slice(i.length-5,6)))}),e.back=function(){i=i.slice(0,-1);var n=i.length>1?i.slice(-1)[0]:"/";e.$apply(function(){t.path(n)})}}]),angular.isUndefinedOrNull=function(e){return angular.isUndefined(e)||null===e},$(document).ready(function(){setBodySmall(),$(".hide-menu").click(function(e){e.preventDefault(),$(window).width()<769?$("body").toggleClass("show-sidebar"):$("body").toggleClass("hide-sidebar")}),$("#side-menu").metisMenu(),$(".i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}),$(".animate-panel").animatePanel(),$(".showhide").click(function(e){e.preventDefault();var t=$(this).closest("div.hpanel"),n=$(this).find("i:first"),r=t.find("div.panel-body"),s=t.find("div.panel-footer");r.slideToggle(300),s.slideToggle(200),n.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),t.toggleClass("").toggleClass("panel-collapse"),setTimeout(function(){t.resize(),t.find("[id^=map-]").resize()},50)}),$(".closebox").click(function(e){e.preventDefault();var t=$(this).closest("div.hpanel");t.remove()}),$(".fullscreen").click(function(){var e=$(this).closest("div.hpanel"),t=$(this).find("i:first");$("body").toggleClass("fullscreen-panel-mode"),t.toggleClass("fa-expand").toggleClass("fa-compress"),e.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}),$(".right-sidebar-toggle").click(function(){$("#right-sidebar").toggleClass("sidebar-open")}),$(".small-header-action").click(function(e){e.preventDefault();var t=$(this).find("i:first"),n=$(this).parent().find("#hbreadcrumb");$(this).parent().parent().parent().toggleClass("small-header"),n.toggleClass("m-t-lg"),t.toggleClass("fa-arrow-up").toggleClass("fa-arrow-down")}),setTimeout(function(){fixWrapperHeight()}),$("#sparkline1").sparkline([5,6,7,2,0,4,2,4,5,7,2,4,12,11,4],{type:"bar",barWidth:7,height:"30px",barColor:"#62cb31",negBarColor:"#53ac2a"}),$(".tooltip-demo").tooltip({selector:"[data-toggle=tooltip]"}),$("[data-toggle=popover]").popover(),$(".modal").appendTo("body")}),$(window).bind("load",function(){$(".splash").css("display","none")}),$(window).bind("resize click",function(){setBodySmall(),setTimeout(function(){fixWrapperHeight()},300)}),$.fn.animatePanel=function(){var e=$(this),t=$(this).data("effect"),n=$(this).data("delay"),r=$(this).data("child");t||(t="zoomIn"),n?n/=10:n=.06,r=r?"."+r:".row > div";var s=0,o=Math.abs(n)+s,i=e.find(r);i.addClass("opacity-0"),i=e.find(r),i.addClass("stagger").addClass("animated-panel").addClass(t);var a=i.length+10,l=a*n*1e4/10;i.each(function(e,t){o+=n;var r=Math.round(10*o)/10;$(t).css("animation-delay",r+"s"),$(t).removeClass("opacity-0")}),setTimeout(function(){$(".stagger").css("animation",""),$(".stagger").removeClass(t).removeClass("animated-panel").removeClass("stagger")},l)},angular.module("Jobsite").controller("dashboardController",["$rootScope","$scope","AuthService",function(e,t,n){t.role=n.authentication.isAdministrator?"Admin":"User"}]),angular.module("Jobsite").factory("AuthService",["$http","$q","$cookies","RESOURCES",function(e,t,n,r){var s=r.API_BASE_PATH,o={},i={isAuth:!1,userName:"",isUser:!1,isAdministrator:!1},a={provider:"",userName:"",externalAccessToken:"",email:"",firstName:"",lastName:""},l=function(e,t){if(t="undefined"!=typeof t?t:!0){var r=new Date((new Date).getTime()+1e3*e.expires_in);n.putObject("ValiDatedTokenObject",e,{expires:r})}else sessionStorage.setItem("ValiDatedTokenObject",JSON.stringify(e))},c=function(){var e=sessionStorage.getItem("reference_friend_ids"),t=[];return null!=e&&(t=JSON.parse(e),null==t&&(t=[])),t},u=function(){sessionStorage.removeItem("reference_friend_ids")},d=function(){var n=t.defer(),r={};return r.referenceIds=c(),i.isUser&&r.referenceIds.length>0?e.post(s+"tracking/references",r).then(function(e){u(),n.resolve(e)},function(e){n.reject(e)}):(u(),n.resolve(null)),n.promise},g=function(){var e=sessionStorage.getItem("referrals"),t=[];return null!=e&&(t=JSON.parse(e),null==t&&(t=[])),t},f=function(){sessionStorage.removeItem("referrals")},m=function(){var t={};t.referralIds=g(),i.isUser&&t.referralIds.length>0?e.post(s+"tracking/referrals",t).then(function(e){return f(),e}):f()},p=function(t){return v(),e.post(s+"account/register",t).then(function(e){return e})},h=function(n){var r="grant_type=password&username="+n.userName+"&password="+n.password,o=t.defer();return e.post(s+"token",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){var t="User"==e.roles,r="Admin"==e.roles;e.isUser=t,e.isAdministrator=r,l(e,n.rememberMe),i.isAuth=!0,i.userName=n.userName,i.isUser=t,i.isAdministrator=r,m(),d().then(function(t){o.resolve(e)},function(e){o.reject(e)})}).error(function(e,t){v(),o.reject(e)}),o.promise},v=function(){n.remove("ValiDatedTokenObject"),sessionStorage.removeItem("ValiDatedTokenObject"),i.isAuth=!1,i.userName="",i.isUser=!1,i.isAdministrator=!1},b=function(){var e=n.getObject("ValiDatedTokenObject");if(!e){var t=sessionStorage.getItem("ValiDatedTokenObject");t&&(e=JSON.parse(t))}e&&(i.isAuth=!0,i.userName=e.userName,e.isUser?i.isUser=e.isUser:i.isUser="User"==e.roles,e.isAdministrator?i.isAdministrator=e.isAdministrator:i.isAdministrator="Admin"==e.roles)},y=function(n){var r=t.defer();return e.get(s+"account/ObtainLocalAccessToken",{params:{provider:n.provider,externalAccessToken:n.externalAccessToken}}).success(function(e){var t="User"==e.roles,n="Admin"==e.roles;e.isUser=t,e.isAdministrator=n,l(e),i.isAuth=!0,i.userName=e.userName,i.isUser=t,i.isAdministrator=n,m(),d().then(function(t){r.resolve(e)},function(e){r.reject(e)})}).error(function(e,t){v(),r.reject(e)}),r.promise},I=function(n){var r=t.defer();return e.post(s+"account/registerexternal",n).success(function(e){var t="User"==e.roles,n="Admin"==e.roles;e.isUser=t,e.isAdministrator=n,l(e),i.isAuth=!0,i.userName=e.userName,i.isUser=t,i.isAdministrator=n,r.resolve(e)}).error(function(e,t){v(),r.reject(e)}),r.promise},w=function(t){return e.post(s+"account/resetpasswordtoken",t).then(function(e){return e})},S=function(t){return e.post(s+"account/resetpassword",t).then(function(e){return e})};return o.saveRegistration=p,o.login=h,o.logOut=v,o.fillAuthData=b,o.authentication=i,o.obtainAccessToken=y,o.externalAuthData=a,o.registerExternal=I,o.resetPasswordToken=w,o.resetPassword=S,o.trackReferences=d,o}]),angular.module("Jobsite").factory("ResumesService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(t,n,s){return params={},"undefined"!=typeof t&&""!==t&&(params.text=t),"undefined"!=typeof n&&(params.skip=n),"undefined"!=typeof s&&(params.count=s),e.get(r+"resumes/search",{params:params}).then(function(e){return e})},i=function(t){return params={},"undefined"!=typeof t&&""!==t&&(params.text=t),e.get(r+"resumes/search/count",{transformResponse:function(e,t,n){return{content:e}},params:params}).then(function(e){return e})},a=function(t,n){return params={},"undefined"!=typeof n&&""!==n&&(params.text=n),e.get(r+"resumes/"+t+"/search",{params:params}).then(function(e){return e})},l=function(t,n){return e.get(r+"resumes/"+t+"/pdf/"+n+"/url",{transformResponse:function(e,t,n){return{content:e}}}).then(function(e){return e})},c=function(t,n,s){return params={},"undefined"!=typeof s&&""!==s&&(params.text=s),e.get(r+"resumes/"+t+"/"+n+"/search",{params:params}).then(function(e){return e})},u=function(t){return e.get(r+"resumes/"+t+"/native/url",{transformResponse:function(e,t,n){return{content:e}}}).then(function(e){return e})},d=function(t){return e.get(r+"resumes/"+t+"/pdf/url",{transformResponse:function(e,t,n){return{content:e}}}).then(function(e){return e})},g=function(t){return e.get(r+"resumes/"+t).then(function(e){return e})},f=function(t){return e.get(r+"resumes/").then(function(e){return e})},m=function(t){return e["delete"](r+"resumes/"+t).then(function(e){return e})},p=function(t){return e.post(r+"resumes",t).then(function(e){return e})},h=function(t,n){return e.put(r+"resumes/"+t,n).then(function(e){return e})},v=function(t,n){return e.post(r+"jobs/"+t+"/applybyexistresume",n).then(function(e){return e})},b=function(t,n){return e.post(r+"jobs/"+t+"/apply",n).then(function(e){return e})},y=function(t){var n=new FormData;return n.append("file",t),e.post(r+"resumes/upload",n,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(e){return e})},I=function(t,n,s){return e.post(r+"resumes/"+t+"/pages/"+n+"/admintags",s).then(function(e){return e})},w=function(t,n,s){return e.post(r+"resumes/"+t+"/pages/"+n+"/adminnotes",s).then(function(e){return e})},S=function(t,n){return e.get(r+"jobs/"+t+"/resumes/"+n).then(function(e){return e})},T=function(t){return e.get(r+"jobs/"+t+"/resumes/").then(function(e){return e})};return s.searchResumes=o,s.searchIntoResume=a,s.searchIntoPageResume=c,s.getPageUrl=l,s.searchResumesCount=i,s.getNativeUrl=u,s.gePdfUrl=d,s.getResume=g,s.getMyResumes=f,s.deleteResume=m,s.postResume=p,s.putResume=h,s.applyToJobByExistResume=v,s.applyToJob=b,s.uploadResume=y,s.getApplicant=S,
s.addAdminTags=I,s.addAdminNotes=w,s.getApplicants=T,s}]),angular.module("Jobsite").factory("JobsService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(t,n,s,o,i,a,l,c,u,d,g,f){return params={},"undefined"!=typeof t&&""!==t&&null!=t&&(params.text=t),"undefined"!=typeof n&&""!==n&&null!=n&&(params.locationId=n),"undefined"!=typeof s&&""!==s&&null!=s&&(params.categoryId=s),"undefined"!=typeof o&&""!==o&&null!=o&&(params.employeeType=o),"undefined"!=typeof i&&null!=i&&""!==i&&0!=i&&(params.dateFrom=new Date(i).getTime()/1e3),"undefined"!=typeof a&&null!=a&&""!==a&&0!=a&&(params.dateTo=new Date(a).getTime()/1e3),"undefined"!=typeof l&&null!=l&&(params.orderByTitle=l),"undefined"!=typeof c&&null!=c&&(params.orderByLocation=c),"undefined"!=typeof u&&null!=u&&(params.orderByDate=u),"undefined"!=typeof d&&null!=d&&(params.orderDirection=d),"undefined"!=typeof g&&null!=g&&(params.skip=g),"undefined"!=typeof f&&null!=f&&(params.count=f),e.get(r+"jobs/search_andavnced",{params:params}).then(function(e){return e})},i=function(t,n){return params={},"undefined"!=typeof n&&""!==n&&null!=n&&(params.referralId=n),e.get(r+"jobs/"+t).then(function(e){return e})},a=function(t,n){return e.put(r+"jobs/"+t,n).then(function(e){return e})},l=function(t){return e.post(r+"jobs",t).then(function(e){return e})},c=function(t){return e["delete"](r+"jobs/"+t).then(function(e){return e})},u=function(){return e.get(r+"jobs/my").then(function(e){return e})},d=function(){return e.get(r+"jobs/all/applied").then(function(e){return e})},g=function(t,n){return e.put(r+"jobs/"+t+"/activity",n).then(function(e){return e})},f=function(t){return e.get(r+"jobs/"+t+"/report",{responseType:"arraybuffer"}).success(function(e,t,n){var r="application/octet-stream",s=!1;n=n(),console.log(n);var o=n["x-filename"]||"download.bin",i=n["content-type"]||r;try{console.log("Trying saveBlob method ...");var a=new Blob([e],{type:i});if(navigator.msSaveBlob)navigator.msSaveBlob(a,o);else{var l=navigator.webkitSaveBlob||navigator.mozSaveBlob||navigator.saveBlob;if(void 0===l)throw"Not supported";l(a,o)}console.log("saveBlob succeeded"),s=!0}catch(c){console.log("saveBlob method failed with the following exception:"),console.log(c)}if(!s){var u=window.URL||window.webkitURL||window.mozURL||window.msURL;if(u){var d=document.createElement("a");if("download"in d)try{console.log("Trying download link method with simulated click ...");var a=new Blob([e],{type:i}),g=u.createObjectURL(a);d.setAttribute("href",g),d.setAttribute("download",o);var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(f),console.log("Download link method with simulated click succeeded"),s=!0}catch(c){console.log("Download link method with simulated click failed with the following exception:"),console.log(c)}if(!s)try{console.log("Trying download link method with window.location ...");var a=new Blob([e],{type:r}),g=u.createObjectURL(a);window.location=g,console.log("Download link method with window.location succeeded"),s=!0}catch(c){console.log("Download link method with window.location failed with the following exception:"),console.log(c)}}}s||(console.log("No methods worked for saving the arraybuffer, using last resort window.open"),window.open(httpPath,"_blank",""))}).error(function(e,t){console.log("Request failed with status: "+t),$scope.errorDetails="Request failed with status: "+t})};return s.searchAdvancedJobs=o,s.getJob=i,s.putJob=a,s.postJob=l,s.deleteJob=c,s.getMyJobs=u,s.getJobsApplied=d,s.changeActivity=g,s.downloadReportByJobId=f,s}]),angular.module("Jobsite").factory("LocationsService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(){return e.get(r+"locations").then(function(e){return e})},i=function(t){return e.get(r+"locations/"+t).then(function(e){return e})},a=function(t,n,s,o){return params={},params.text=t,"undefined"!=typeof n&&(params.parentId=n),"undefined"!=typeof s&&(params.level=s),"undefined"!=typeof o&&(params.count=o),e.get(r+"locations/suggest",{params:params}).then(function(e){return e})};return s.getLocations=o,s.getLocation=i,s.suggestLocations=a,s}]),angular.module("Jobsite").factory("CategoriesService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(){return e.get(r+"categories",{headers:{"Content-Type":"application/json"}}).then(function(e){return e})};return s.getCategories=o,s}]),angular.module("Jobsite").factory("SearchResumesParameters",function(){var e={};return e}),angular.module("Jobsite").factory("ScreeningsService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(t){return e.post(r+"screenings",t).then(function(e){return e})},i=function(t,n){return e.put(r+"screenings/"+t,n).then(function(e){return e})},a=function(t){return e["delete"](r+"screenings/"+t).then(function(e){return e})},l=function(t){return e.get(r+"screenings/"+t).then(function(e){return e})},c=function(){return e.get(r+"screenings/my/").then(function(e){return e})},u=function(t,n){return e.post(r+"screenings/"+t+"/questions/",n).then(function(e){return e})},d=function(t,n,s,o){return e.get(r+"jobs/"+t+"/resumes/"+n+"/screenings/"+s+"/questions/"+o).then(function(e){return e})},g=function(t,n,s){return e.get(r+"jobs/"+t+"/resumes/"+n+"/screenings/"+s).then(function(e){return e})},f=function(t,n,s,o,i){return e.post(r+"jobs/"+t+"/resumes/"+n+"/screenings/"+s+"/questions/"+o+"/result",i).then(function(e){return e})},m=function(t,n){return e.get(r+"jobs/"+t+"/resumes/"+n+"/screenings/results").then(function(e){return e})},p=function(t){return e.get(r+"jobs/"+t+"/screenings/order/new",{transformResponse:function(e,t,n){return{content:e}}}).then(function(e){return e})},h=function(t){return e.get(r+"jobs/"+t+"/screenings").then(function(e){return e})},v=function(t,n,s){return e.post(r+"jobs/"+t+"/resumes/"+n+"/screenings",s).then(function(e){return e})},b=function(t){return e.get(r+"screenings/"+t+"/questions").then(function(e){return e})},y=function(t,n){return e.get(r+"screenings/"+t+"/questions/"+n).then(function(e){return e})},I=function(t,n,s){return e.put(r+"screenings/"+t+"/questions/"+n,s).then(function(e){return e})},w=function(t,n){return e["delete"](r+"screenings/"+t+"/questions/"+n).then(function(e){return e})};return s.postScreening=o,s.putScreening=i,s.deleteScreening=a,s.getScreening=l,s.getMyScreenings=c,s.postScreeningQuestion=u,s.getScreeningQuestionByResumeId=d,s.getScreeningByResumeId=g,s.setResultOnScreeningQuestion=f,s.getTestResultsByResumeId=m,s.getNewOrder=p,s.getScreeningsByJobId=h,s.sendScreeningsToResume=v,s.getScreeningQuestionsByScreeningId=b,s.getScreeningQuestionById=y,s.putScreeningQuestion=I,s.deleteScreeningQuestion=w,s}]),angular.module("Jobsite").factory("ReferralService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(t){return e.post(r+"referrals",t).then(function(e){return e})},i=function(){return e.get(r+"referrals/my").then(function(e){return e})},a=function(){return e.get(r+"references/my").then(function(e){return e})},l=function(t){return e["delete"](r+"references/"+t).then(function(e){return e})},c=function(t){return e.get(r+"references/"+t).then(function(e){return e})},u=function(t){return e.post(r+"references",t).then(function(e){return e})},d=function(t,n){return e.put(r+"references/"+t,n).then(function(e){return e})},g=function(t,n){return e.post(r+"references/"+t+"/questions/",n).then(function(e){return e})},f=function(t){return e.get(r+"references/"+t+"/questions/").then(function(e){return e})},m=function(t,n){return e.get(r+"references/"+t+"/questions/"+n).then(function(e){return e})},p=function(t,n,s){return e.put(r+"references/"+t+"/questions/"+n,s).then(function(e){return e})},h=function(t,n){return e["delete"](r+"references/"+t+"/questions/"+n).then(function(e){return e})},v=function(t,n,s){return e.post(r+"jobs/"+t+"/resumes/"+n+"/references/",s).then(function(e){return e})},b=function(t){return e.post(r+"references/friends",t).then(function(e){return e})},y=function(t,n,s){return e.get(r+"jobs/"+t+"/resumes/"+n+"/references/"+s+"/friends/count",{transformResponse:function(e,t,n){return{content:e}}}).then(function(e){return e})},I=function(){return e.get(r+"references/friends/my").then(function(e){return e})},w=function(t,n,s){return e.get(r+"jobs/"+t+"/resumes/"+n+"/references/"+s).then(function(e){return e})},S=function(t,n,s){return e.get(r+"jobs/"+t+"/resumes/"+n+"/references/"+s+"/questions").then(function(e){return e})},T=function(t,n,s,o){return e.post(r+"jobs/"+t+"/resumes/"+n+"/references/"+s+"/questions/result",o).then(function(e){return e})};return s.postReferral=o,s.getReferrals=i,s.getMyJobReferrals=a,s.deleteJobReferral=l,s.getJobReferral=c,s.putJobReferral=d,s.postJobReferral=u,s.postReferralQuestion=g,s.getReferralQuestionsByJobReferralId=f,s.getReferralQuestionById=m,s.putReferralQuestion=p,s.deleteReferralQuestion=h,s.sendReferenceRequestToResume=v,s.sendReferenceToFriends=b,s.getReferenceCountToFriends=y,s.getReferences=I,s.getReferenceByResumeId=w,s.getReferenceQuestions=S,s.setAnswersOnReferenceQuestions=T,s}]),angular.module("Jobsite").factory("UsersService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(){return e.get(r+"users/me").then(function(e){return e})},i=function(){return e.get(r+"account/userinfo").then(function(e){return e})};return s.getMyInfo=o,s.accountInfo=i,s}]),angular.module("Jobsite").factory("TraitifyService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(){return e.get(r+"traitify/decks/").then(function(e){return e})},i=function(t,n,s){return e.post(r+"jobs/"+t+"/resumes/"+n+"/traitifytest/",s).then(function(e){return e})},a=function(t,n,s){return e.get(r+"jobs/"+t+"/resumes/"+n+"/traitifytest/"+s).then(function(e){return e})},l=function(t,n,s){return e.put(r+"jobs/"+t+"/resumes/"+n+"/traitifytest/"+s+"/finish",null).then(function(e){return e})};return s.getDecks=o,s.sendTraitify=i,s.getTraitify=a,s.finishTraitify=l,s}]),angular.module("Jobsite").factory("InterviewsService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(){return e.get(r+"interviews/my").then(function(e){return e})},i=function(t){return e["delete"](r+"interviews/"+t).then(function(e){return e})},a=function(t){return e.get(r+"interviews/"+t).then(function(e){return e})},l=function(t){return e.post(r+"interviews",t).then(function(e){return e})},c=function(t,n){return e.put(r+"interviews/"+t,n).then(function(e){return e})},u=function(t,n){return e.post(r+"interviews/"+t+"/questions/",n).then(function(e){return e})},d=function(t){return e.get(r+"interviews/"+t+"/questions/").then(function(e){return e})},g=function(t,n){return e.get(r+"interviews/"+t+"/questions/"+n).then(function(e){return e})},f=function(t,n,s){return e.put(r+"interviews/"+t+"/questions/"+n,s).then(function(e){return e})},m=function(t,n){return e["delete"](r+"interviews/"+t+"/questions/"+n).then(function(e){return e})},p=function(t,n,s){return e.post(r+"jobs/"+t+"/resumes/"+n+"/interviews/",s).then(function(e){return e})},h=function(t,n,s){return e.put(r+"jobs/"+t+"/resumes/"+n+"/interviews/notify/",s).then(function(e){return e})},v=function(t,n,s){return e.get(r+"jobs/"+t+"/resumes/"+n+"/interviews/"+s).then(function(e){return e})},b=function(t,n,s){return e.get(r+"jobs/"+t+"/resumes/"+n+"/interviews/"+s+"/questions").then(function(e){return e})},y=function(t,n,s,o){return e.post(r+"jobs/"+t+"/resumes/"+n+"/interviews/"+s+"/questions/result",o).then(function(e){return e})};return s.getInterviews=o,s.deleteInterview=i,s.getInterview=a,s.putInterview=c,s.postInterview=l,s.postInterviewQuestion=u,s.getInterviewQuestionsByInterviewId=d,s.getInterviewQuestionById=g,s.putInterviewQuestion=f,s.deleteInterviewQuestion=m,s.sendInterviewRequestToResume=p,s.notifyInterviewCandidate=h,s.getInterviewByResumeId=v,s.getInterviewQuestions=b,s.setAnswersOnInterviewQuestions=y,s}]),angular.module("Jobsite").factory("ClientsService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(){return e.get(r+"clients").then(function(e){return e})},i=function(t){return e["delete"](r+"clients/"+t).then(function(e){return e})},a=function(t){return e.get(r+"clients/"+t).then(function(e){return e})},l=function(t){return e.post(r+"clients",t).then(function(e){return e})},c=function(t,n){return e.put(r+"clients/"+t,n).then(function(e){return e})};return s.getClients=o,s.deleteClient=i,s.getClient=a,s.putClient=c,s.postClient=l,s}]),angular.module("Jobsite").factory("MessagesService",["$http","$q","RESOURCES",function(e,t,n){var r=n.API_BASE_PATH,s={},o=function(t){return e.post(r+"messages",t).then(function(e){return e})},i=function(t,n){return e.get(r+"jobs/"+t+"/resumes/"+n+"/messages").then(function(e){return e})},a=function(t){return e.post(r+"messagesbulk",t).then(function(e){return e})},l=function(t){return e.post(r+"messagetemplates",t).then(function(e){return e})},c=function(){return e.get(r+"messagetemplates").then(function(e){return e})};return s.sendMessage=o,s.getMessages=i,s.sendBulkMessage=a,s.postMessageTemplate=l,s.getMessageTemplates=c,s}]),angular.module("Jobsite").factory("AuthInterceptorService",["$q","$injector","$location","$cookies",function(e,t,n,r){return{request:function(e){e.headers=e.headers||{};var t=r.getObject("ValiDatedTokenObject");if(!t){var n=sessionStorage.getItem("ValiDatedTokenObject");n&&(t=JSON.parse(n))}return t&&t.access_token&&(e.headers.Authorization="Bearer "+t.access_token),e},responseError:function(r){if(401===r.status||403===r.status){var s=t.get("AuthService");s.logOut(),n.path("/login").search("returnUrl",n.path())}return e.reject(r)}}}]),angular.module("Jobsite").filter("startFrom",function(){return function(e,t){return e?(t=+t,e.slice(t)):[]}}),angular.module("Jobsite").filter("trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),angular.module("Jobsite").filter("trustedHtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),angular.module("Jobsite").filter("limitHtml",function(){return function(e,t){var n=String(e).replace(/<[^>]+>/gm,"");n.length;return n.length>t?n.substr(0,t-1):n}}),angular.module("Jobsite").filter("limitHightlightHtml",function(){return function(e,t){var n=String(e).replace(/<span class="hl">([^><]+)<\/span>/g,"[high6789]$1[/high6789]");n=String(n).replace(/<[^>]+>/gm,"");var r=n.indexOf("[high6789]");if(0>=r)r=0;else{var s=t/4;r-s>0&&(r-=s)}n.length;return n=n.length>t?n.substr(r,t-1):n,n=String(n).replace(/\[high6789\]/g,"<span class='hl'>"),n=String(n).replace(/\[\/high6789\]/g,"</span>")}}),angular.module("Jobsite").directive("pageTitle",pageTitle).directive("sideNavigation",sideNavigation).directive("minimalizaMenu",minimalizaMenu).directive("sparkline",sparkline).directive("icheck",icheck).directive("panelTools",panelTools).directive("panelToolsFullscreen",panelToolsFullscreen).directive("smallHeader",smallHeader).directive("animatePanel",animatePanel).directive("landingScrollspy",landingScrollspy).directive("ngEnter",ngEnterHandler).directive("customOnChange",fileUploadHandler).directive("back",backHandler).directive("pwCheck",pwCheck),backHandler.$inject=["$window","$rootScope"],pageTitle.$inject=["$rootScope","$timeout"],sideNavigation.$inject=["$timeout"],minimalizaMenu.$inject=["$rootScope"],icheck.$inject=["$timeout"],panelTools.$inject=["$timeout"],panelToolsFullscreen.$inject=["$timeout"],animatePanel.$inject=["$timeout","$state"],angular.module("Jobsite").directive("contenteditable",["$sce",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,s){function o(){var e=n.html();r.stripBr&&"<br>"==e&&(e=""),s.$setViewValue(e)}s&&(s.$render=function(){n.html(e.getTrustedHtml(s.$viewValue||""))},n.on("blur keyup change",function(){t.$evalAsync(o)}),o())}}}]),angular.module("Jobsite").directive("datepickerPopup",["dateFilter","datepickerPopupConfig",function(e,t){return{restrict:"A",priority:1,require:"ngModel",link:function(n,r,s,o){var i=s.datepickerPopup||t.datepickerPopup;o.$formatters.push(function(t){return e(t,i)})}}}]),angular.module("Jobsite").controller("appCtrl",appCtrl),appCtrl.$inject=["$http","$scope","$timeout"],angular.module("Jobsite").controller("AddjobformController",["$scope","$sce","$location","$http","$timeout","$filter","RESOURCES","$stateParams","CategoriesService","LocationsService","JobsService","$compile","$modal","ClientsService",function(e,t,n,r,s,o,i,a,l,c,u,d,g,f){e.id=a.id,e.locationState={id:"",name:"",value:"",label:""},e.locationCity={id:"",name:"",value:"",label:""},e.adminClientSelected={id:"",name:"",value:"",label:""},e.locationStateOption={options:{html:!1,focusOpen:!1,onlySelectValid:!1,source:function(e,t){0!=e.term.length&&c.suggestLocations(e.term).then(function(e){res=e.data;for(var n=[],r=0;r<res.length;r++){var s=res[r];n.push({label:s.text,value:s.text,id:s.id,name:s.text})}t(n)},function(e){console.log(e.data.message)})}},methods:{}},e.locationStateOption.events={change:function(t,n){e.locationCity.id="",e.locationCity.name="",e.locationCity.value="",e.locationCity.label="",e.locationCityOption.methods.clean()},close:function(e,t){s(function(){angular.element("#locationCity").focus()})}},e.locationCityOption={options:{html:!1,focusOpen:!1,onlySelectValid:!0,source:function(t,n){0!=t.term.length&&c.suggestLocations(t.term,e.locationState.id,2).then(function(e){res=e.data;for(var t=[],r=0;r<res.length;r++){var s=res[r];t.push({label:s.text,value:s.text,id:s.id,name:s.text})}n(t)},function(e){console.log(e.data.message)})}},methods:{}},e.adminClientOption={options:{html:!1,focusOpen:!0,onlySelectValid:!1,source:function(t,n){var r=e.clients;0!=t.term.length&&(r=o("filter")(e.clients,{companyName:t.term}));for(var s=[],i=0;i<r.length;i++){var a=r[i];s.push({label:a.companyName,value:a.companyName,id:a.id,name:a.companyName})}n(s)}},methods:{}},e.EmployeeTypes=i.EMPLOYEE_TYPES,e.categoryID="",e.posteddate=(new Date).getTime()/1e3,e.experience="",e.jobtype="",e.jobTitleLocationEditable=!0,e.jobDescriptionContentEditable=!0,e.jobRequirementsContentEditable=!0,e.aboutUsEditable=!0,e.aboutUsHtmlContent="",e.aboutUsContent=t.trustAsHtml(e.aboutUsHtmlContent),e.jobTitleLocationHtmlContent="Enter Job Title",e.jobTitleLocationContent=t.trustAsHtml(e.jobTitleLocationHtmlContent),e.jobDescriptionHtmlContent="",e.jobDescriptionContent=t.trustAsHtml(e.jobDescriptionHtmlContent),e.jobRequirementsHtmlContent="",e.jobRequirementsContent=t.trustAsHtml(e.jobRequirementsHtmlContent),e.jobTitleLocationResultContent="Enter Job Title",e.jobDescriptionResultContent="",e.aboutUsResultContent="",e.jobRequirementsResultContent="",e.tags=[],e.referralFeePercent=null,e.referralFeeAmount=null,l.getCategories().then(function(t){e.categories=t.data},function(e){console.log(e.data.message)}),f.getClients().then(function(t){e.clients=t.data},function(e){console.log(e.data.message)}),""!=e.id&&u.getJob(e.id).then(function(n){response=n.data,e.categoryID=response.categoryId,e.locationCity={id:response.locationId,name:response.location,value:response.location},e.tags=null==response.tags?[]:response.tags,e.jobTitleLocationEditable=!1,e.jobDescriptionContentEditable=!1,e.jobRequirementsContentEditable=!1,e.aboutUsEditable=!1,e.aboutUsHtmlContent=""==response.aboutUs?"  <br> "+response.aboutUs:response.aboutUs,e.posteddate=response.publishedDate,e.employeeType=response.employeeType,e.experience=response.experience,e.jobtype=response.type,e.aboutUsContent=t.trustAsHtml(e.aboutUsHtmlContent),e.jobTitleLocationHtmlContent=""==response.title?"<br>"+response.title:response.title,e.jobTitleLocationContent=t.trustAsHtml(e.jobTitleLocationHtmlContent),e.jobDescriptionHtmlContent=""==response.description?"<br>"+response.description:response.description,e.jobDescriptionContent=t.trustAsHtml(e.jobDescriptionHtmlContent),e.jobRequirementsHtmlContent=""==response.requirements?" <br>"+response.requirements:response.requirements,e.jobRequirementsContent=t.trustAsHtml(e.jobRequirementsHtmlContent),e.jobTitleLocationResultContent=response.title,e.jobDescriptionResultContent=response.description,e.aboutUsResultContent=response.aboutUs,e.jobRequirementsResultContent=response.requirements,e.referralFeePercent=response.referralFeePercent,e.referralFeeAmount=response.referralFeeAmount,e.locationCity.id&&c.getLocation(e.locationCity.id).then(function(t){res=t.data,e.locationState={id:res.parentId,name:res.fullName.split("/")[0],value:res.fullName.split("/")[0]}},function(e){console.log(e.data.message)}),e.adminClientSelected.id=response.adminClientId,e.adminClientSelected.id&&f.getClient(e.adminClientSelected.id).then(function(t){var n=t.data;e.adminClientSelected.name=n.companyName,e.adminClientSelected.value=n.companyName},function(e){console.log(e.data.message)})},function(e){console.log(e.data.message)}),e.toggleEdit=function(t){"jobTitleLocationEditable"==t?e.jobTitleLocationEditable=!0:"jobDescriptionContentEditable"==t?e.jobDescriptionContentEditable=!0:"jobRequirementsContentEditable"==t?e.jobRequirementsContentEditable=!0:"aboutUsEditable"==t&&(e.aboutUsEditable=!0)},e.addtags=function(){-1==e.tags.indexOf(e.tag)&&(e.tags.push(e.tag),e.tag="")},e.removetag=function(t){e.tags.splice(t-1,1)},e.saveChanges=function(t){if(console.log(t),t&&(!e.locationState.id||e.locationCity.id)){angular.isUndefined(e.aboutUsResultContent)||(e.aboutUsHtmlContent=e.aboutUsResultContent),angular.isUndefined(e.jobTitleLocationResultContent)||(e.jobTitleLocationHtmlContent=e.jobTitleLocationResultContent),angular.isUndefined(e.jobDescriptionResultContent)||(e.jobDescriptionHtmlContent=e.jobDescriptionResultContent),angular.isUndefined(e.jobRequirementsResultContent)||(e.jobRequirementsHtmlContent=e.jobRequirementsResultContent),e.jobTitleLocationEditable=!1,e.jobDescriptionContentEditable=!1,e.jobRequirementsContentEditable=!1,e.aboutUsEditable=!1;var r={title:e.jobTitleLocationHtmlContent,description:e.jobDescriptionHtmlContent,locationId:e.locationCity.id,requirements:e.jobRequirementsHtmlContent,aboutUs:e.aboutUsHtmlContent,experience:e.experience,categoryId:e.categoryID,tags:e.tags,employeeType:e.employeeType,referralFeePercent:e.referralFeePercent,referralFeeAmount:e.referralFeeAmount,adminClientId:e.adminClientSelected.id};""!=e.id?u.putJob(e.id,r).then(function(e){n.path("/jobslist")},function(e){console.log(e.data.message)}):u.postJob(r).then(function(e){n.path("/jobslist")},function(e){console.log(e.data.message)})}},e.removechanges=function(){u.deleteJob(e.id).then(function(e){n.path("/jobslist")},function(e){console.log(e.data.message)})},e.setReferral=function(){var t="";angular.isUndefined(e.jobTitleLocationResultContent)||(t=e.jobTitleLocationResultContent);var n=g.open({animation:!0,templateUrl:"views/SetReferral.html",controller:"SetReferralController",size:"md",resolve:{referralFeePercent:function(){return e.referralFeePercent},referralFeeAmount:function(){return e.referralFeeAmount},jobTitle:function(){return t}}});n.result.then(function(t){e.referralFeePercent=t.referralFeePercent,e.referralFeeAmount=t.referralFeeAmount},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("Jobsite").controller("JobListController",["$scope","$http","$timeout","$location","RESOURCES","AuthService","JobsService",function(e,t,n,r,s,o,i){s.API_BASE_PATH;e.currentPage=1,e.entryLimits=[5,10,20,50,100],o.authentication.isAuth||r.path("/login"),e.role=o.authentication.isAdministrator?"Admin":"User";var a=function(){i.getMyJobs().then(function(t){e.list=t.data,e.currentPage=1,e.entryLimit=10,e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)})};a(),e.deleterecords=function(e){i.deleteJob(e).then(function(e){a()},function(e){console.log(e.data.message)})},e.setPage=function(t){e.currentPage=t},e.filter=function(){n(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse}}]),angular.module("Jobsite").controller("Login",["$scope","$rootScope","$location","AuthService","RESOURCES","$modal","$timeout",function(e,t,n,r,s,o,i){if(r.authentication.isAuth)n.path("/dashboard");else{window.location.href.indexOf("register")>-1?e.tabs=[{active:!1},{active:!0}]:e.tabs=[{active:!0},{active:!1}],e.loginData={userName:"",password:"",rememberMe:!0},e.registerData={firstName:"",lastName:"",email:"",emailRepeat:"",userName:"",password:"",passwordRepeat:"",isEmployer:!1},e.login=function(t){return e.successRegisterMessage="",e.errorRegisterDescription="",e.errorLoginDescription="",t?void r.login(e.loginData).then(function(e){var t=sessionStorage.getItem("return_url");null!=t?(sessionStorage.removeItem("return_url"),n.path(t)):n.path("/dashboard")},function(t){null!=t?e.errorLoginDescription=t.error_description:e.errorLoginDescription="Internal Server Error"}):void(e.errorLoginDescription="Please, fill out all fields!")},e.register=function(t){return e.successRegisterMessage="",e.errorRegisterDescription="",e.errorLoginDescription="",t?void r.saveRegistration(e.registerData).then(function(t){e.successRegisterMessage="You have successfully register",i(function(){e.successRegisterMessage="",e.tabs=[{active:!0},{active:!1}]},1e3)},function(t){var n=[];for(var r in t.data.ModelState)for(var s=0;s<t.data.ModelState[r].length;s++)n.push(t.data.ModelState[r][s]);e.errorRegisterDescription="Failed to register user due to: "+n.join(" ")}):void(e.errorRegisterDescription="Please, fill out all fields!")},e.authExternalProvider=function(t){var n=location.protocol+"//"+location.host+"/authcomplete.html";-1!=location.pathname.indexOf("JobSearch.Web")&&(n=location.protocol+"//"+location.host+"/JobSearch.Web/authcomplete.html");var r=s.API_BASE_PATH+"Account/ExternalLogin?provider="+t+"&response_type=token&client_id="+s.CLIENT_ID+"&redirect_uri="+n;window.$windowScope=e;window.open(r,"Authenticate Account","location=0,status=0,width=600,height=750")},e.authCompletedCB=function(t){e.$apply(function(){if("False"==t.haslocalaccount)r.logOut(),r.externalAuthData={provider:t.provider,userName:t.external_user_name,externalAccessToken:t.external_access_token,email:t.email,firstName:t.first_name,lastName:t.last_name},n.path("/associate");else{var s={provider:t.provider,externalAccessToken:t.external_access_token};r.obtainAccessToken(s).then(function(e){var t=sessionStorage.getItem("return_url");null!=t?(sessionStorage.removeItem("return_url"),n.path(t)):n.path("/dashboard")},function(t){e.message=t.error_description})}})};var a=function(e){o.open({animation:!0,templateUrl:e,controller:function(){},size:"lg"})};e.showTerms=function(){a("views/TermsView.html")},e.showPrivacy=function(){a("views/PrivacyView.html")}}}]),angular.module("Jobsite").controller("searchjobController",["$scope","$location","$http","$timeout","RESOURCES","JobsService","$filter","AuthService",function(e,t,n,r,s,o,i,a){a.authentication.isAuth&&(e.role=a.authentication.isAdministrator?"Admin":"User"),e.searchtext="",e.categoryId="",e.locationId="",e.employeeType="",e.EmployeeTypes=s.EMPLOYEE_TYPES,e.dateFrom="",e.dateTo="",e.currentPage=1,e.maxSize=10,e.itemsPerPage=10,e.totalItems=0,e.orderByTitle=!1,e.orderByLocation=!1,e.orderByDate=!1,e.orderDirection=0,e.locationsLimitConst=5,e.locationsLimit=e.locationsLimitConst,e.categoriesLimitConst=5,e.categoriesLimit=e.categoriesLimitConst,e.entryLimits=[5,10,20,50,100];var l=function(){o.searchAdvancedJobs(e.searchtext,e.locationId,e.categoryId,e.employeeType,e.dateFrom,e.dateTo,e.orderByTitle,e.orderByLocation,e.orderByDate,e.orderDirection,(e.currentPage-1)*e.itemsPerPage,e.itemsPerPage).then(function(t){for(var n=t.data,r=[],o=0;o<n.categoriesAggs.length;o++)r.push({category:n.categoriesAggs[o].name,id:n.categoriesAggs[o].id,count:n.categoriesAggs[o].count});for(var i=[],o=0;o<n.locationsAggs.length;o++)i.push({location:n.locationsAggs[o].name,id:n.locationsAggs[o].id,count:n.locationsAggs[o].count});var a=s.EMPLOYEE_TYPES;n.employeeTypes.length>0&&(a=s.EMPLOYEE_TYPES.filter(function(e){for(var t=0;t<n.employeeTypes.length;t++)if(e.value==n.employeeTypes[t])return!0;return!1})),e.locations=i,e.categories=r,e.list=n.items,e.totalItems=n.count,e.EmployeeTypes=a},function(e){console.log(e.data.message)})};e.searchjob=function(){e.categoryId="",e.locationId="",e.employeeType="",e.dateFrom="",e.dateTo="",e.orderByTitle=!1,e.orderByLocation=!1,e.orderByDate=!1,e.orderDirection=0,l()},e.searchbycategory=function(t){e.categoryId!=t?e.categoryId=t:e.categoryId="",l()},e.searchbylocation=function(t){e.locationId!=t?e.locationId=t:e.locationId="",l()},e.searchByFilter=function(){l()},e.setPage=function(t){e.currentPage=t},e.filter=function(){r(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(t){"title"==t?e.orderByTitle=!0:e.orderByTitle=!1,"location"==t?e.orderByLocation=!0:e.orderByLocation=!1,"publishedDate"==t?e.orderByDate=!0:e.orderByDate=!1,1==e.orderDirection?e.orderDirection=0:e.orderDirection=1,l()},e.pageChanged=function(){l()},e.pageSizeChanged=function(){l()},l(),e.open0=function(t){t.preventDefault(),t.stopPropagation(),e.status0.opened=!0},e.open1=function(t){t.preventDefault(),t.stopPropagation(),e.status1.opened=!0},e.status0={opened:!1},e.status1={opened:!1}}]),angular.module("Jobsite").controller("ViewJobDetailsController",["$rootScope","$scope","$location","$stateParams","$modal","$http","$location","$sce","JobsService","AuthService",function(e,t,n,r,s,o,n,i,a,l){t.loading=!1;var c=r.id,u=r.referral,d=r.type;if(t.referralText="",!l.authentication.isAuth){var g=sessionStorage.getItem("referrals"),f=[];null!=g&&(f=JSON.parse(g),null==f&&(f=[])),-1==f.indexOf(u)&&(f.push(u),sessionStorage.setItem("referrals",JSON.stringify(f)))}a.getJob(c,u).then(function(n){t.loading=!0,t.jobTitle=i.trustAsHtml(n.data.title),t.jobLocation=n.data.location,t.jobDescription=i.trustAsHtml(n.data.description),t.jobRequirements=i.trustAsHtml(n.data.requirements),t.employeeType=n.data.employeeType,t.location=n.data.location,t.jobtype=n.data.type,t.experience=n.data.experience,t.posteddate=n.data.publishedDate,t.jobAboutus=i.trustAsHtml(n.data.aboutUs),t.applicants=n.data.applicants,t.isOwn=n.data.isOwn,t.isApplied=n.data.isApplied,t.isReferral=n.data.referralFeePercent>0||n.data.referralFeeAmount>0,n.data.referralFeePercent>0&&(t.referralText=n.data.referralFeePercent+"%"),n.data.referralFeeAmount>0&&(t.referralText="$"+e.numberWithCommas(n.data.referralFeeAmount)),angular.isUndefinedOrNull(d)||""==d||("referral"==d&&t.isReferral&&t.showReferralView(),"apply"!=d||t.isApplied||t.onApply())},function(e){console.log(e),console.log(e.data.message)});var m=function(e){var t=s.open({animation:!0,templateUrl:"views/SelectLoginRegisterView.html",controller:"SelectLoginRegisterController",size:"md",resolve:{type:function(){return e}}});t.result.then(function(t){null!=t.isLogin&&(n.search("type",e),sessionStorage.setItem("return_url",n.path()),t.isLogin?n.path("/login"):n.path("/register"))},function(){console.log("Modal dismissed at: "+new Date)})};t.onApply=function(){l.authentication.isAuth&&l.authentication.isUser?s.open({templateUrl:"views/applyjob.html",controller:ApplyJobController,scope:t,resolve:{jobId:function(){return c}}}):m("apply")},t.showReferralView=function(){l.authentication.isAuth&&l.authentication.isUser?s.open({animation:!0,templateUrl:"views/SendReferral.html",controller:"SendReferralController",size:"lg",resolve:{jobId:function(){return c},jobTitle:function(){return t.jobTitle},referralText:function(){return t.referralText}}}):m("referral")}}]),angular.module("Jobsite").controller("ApplyJobController",ApplyJobController),ApplyJobController.$inject=["$scope","$http","$location","$modalInstance","ResumesService","RESOURCES","jobId","AuthService","UsersService"],angular.module("Jobsite").controller("associateController",["$scope","$rootScope","$location","$timeout","AuthService",function(e,t,n,r,s){
if(s.authentication.isAuth)n.path("/dashboard");else{e.savedSuccessfully=!1,e.message="",e.registerData={userName:s.externalAuthData.userName,email:s.externalAuthData.email,provider:s.externalAuthData.provider,externalAccessToken:s.externalAuthData.externalAccessToken,firstName:s.externalAuthData.firstName,lastName:s.externalAuthData.lastName,isEmployer:!1,industryId:""},e.registerExternal=function(){s.registerExternal(e.registerData).then(function(t){e.savedSuccessfully=!0,e.message="User has been registered successfully, you will be redicted to dashboard page in 2 seconds.",o()},function(t){var n=[];for(var r in t.ModelState)n.push(t.ModelState[r]);e.message="Failed to register user due to:"+n.join(" ")})};var o=function(){var e=r(function(){r.cancel(e);var t=sessionStorage.getItem("return_url");null!=t?(sessionStorage.removeItem("return_url"),n.path(t)):n.path("/dashboard")},2e3)}}}]),angular.module("Jobsite").controller("HeaderController",["$scope","AuthService","$location",function(e,t,n){e.isAuth=t.authentication.isAuth,e.isAdministrator=t.authentication.isAdministrator,e.isUser=t.authentication.isUser,e.isActive=function(e){return e===n.path()}}]),angular.module("Jobsite").controller("ApplicantsController",["$scope","$http","$timeout","$location","$state","AuthService","RESOURCES","$stateParams","ResumesService","ScreeningsService","JobsService","$modal",function(e,t,n,r,s,o,i,a,l,c,u,d){var g=(i.API_BASE_PATH,a.id),f=a.resumeId,m=a.messageshow;if(e.entryLimits=[5,10,20,50,100],!o.authentication.isAuth&&1==m&&f&&(r.search("resumeId",f),r.search("messageshow",m),sessionStorage.setItem("return_url",r.path()),r.path("/login")),o.authentication.isAdministrator){e.jobScreenings=[],e.screeningsItems=0,l.getApplicants(g).then(function(t){e.list=t.data,e.currentPage=1,e.entryLimit=10,e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)}),c.getScreeningsByJobId(g).then(function(t){e.jobScreenings=t.data},function(e){console.log(e.data.message)}),e.setPage=function(t){e.currentPage=t},e.filter=function(){n(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse},e.detailViewShow=function(e){l.searchIntoPageResume(e,1,"").then(function(e){var t=e.data;d.open({animation:!0,templateUrl:"views/ResumeDetailView.html",controller:"ResumeDetailController",windowClass:"modal-fullscreen",resolve:{resume:function(){return t},text:function(){return""}}})},function(e){console.log(e.data.message)})},e.arrayNotEmpty=function(e){var t=null==e.passedScreeningIds?0:e.passedScreeningIds.length;return 0!=t},e.sendScreeningViewShow=function(e){d.open({animation:!0,templateUrl:"views/SendScreeningView.html",controller:"SendScreeningController",size:"lg",resolve:{resume:function(){return e},jobId:function(){return g}}})},e.sendReferenceRequestViewShow=function(e){d.open({animation:!0,templateUrl:"views/SendReferenceRequestView.html",controller:"SendReferenceRequestController",size:"lg",resolve:{resume:function(){return e},jobId:function(){return g}}})},e.sendTraitifyViewShow=function(e){d.open({animation:!0,templateUrl:"views/SendTraitifyRequestView.html",controller:"SendTraitifyRequestController",size:"lg",resolve:{resume:function(){return e},jobId:function(){return g}}})},e.sendInterviewViewShow=function(e){d.open({animation:!0,templateUrl:"views/SendInterviewView.html",controller:"SendInterviewController",size:"lg",resolve:{resume:function(){return e},jobId:function(){return g}}})},e.showCover=function(e){d.open({animation:!0,templateUrl:"views/ShowCoverView.html",controller:"ShowCoverController",size:"lg",resolve:{resume:function(){return e},jobId:function(){return g}}})};var p=function(e,t,n){d.open({animation:!0,templateUrl:"views/MessagesView.html",controller:"MessagesController",size:"lg",resolve:{resume:function(){return n},resumeId:function(){return t},jobId:function(){return e},job:function(){return null}}})};1==m&&f&&p(g,f,null),e.sendMessage=function(e){p(g,e.id,e)},e.downloadReport=function(){u.downloadReportByJobId(g)}}else r.path("/logout")}]),angular.module("Jobsite").controller("SearchResumesController",["$scope","AuthService","$location","SearchResumesParameters","ResumesService","$modal",function(e,t,n,r,s,o){e.isAuth=t.authentication.isAuth,e.isAdministrator=t.authentication.isAdministrator,e.isUser=t.authentication.isUser,e.isActive=function(e){return e===n.path()},e.searchText=r.searchText,e.resumes=[],e.currentPage=1,e.itemsPerPage=10,e.totalItems=0,e.maxSize=5,e.search=function(){skip=(e.currentPage-1)*e.itemsPerPage,s.searchResumes(e.searchText,skip,e.itemsPerPage).then(function(t){e.resumes=t.data,s.searchResumesCount(e.searchText).then(function(t){e.totalItems=t.data.content},function(e){console.log(e.data.message)})},function(e){console.log(e.data.message)})},e.search(),e.detailViewShow=function(t){o.open({animation:!0,templateUrl:"views/ResumeDetailView.html",controller:"ResumeDetailController",windowClass:"modal-fullscreen",resolve:{resume:function(){return t},text:function(){return e.searchText}}})},e.pageChanged=function(){_search()}}]),angular.module("Jobsite").controller("SearchResumesHomeController",["$scope","AuthService","$location","SearchResumesParameters",function(e,t,n,r){e.searchText="",e.search=function(){r.searchText=e.searchText,n.path("/searchresumes")}}]),angular.module("Jobsite").controller("ResumeDetailController",["$scope","$modalInstance","ResumesService","$sce","$timeout","$document","resume","text",function(e,t,n,r,s,o,i,a){function l(){var t=location.protocol+"//"+location.host;-1!=location.pathname.indexOf("JobSearch.Web")&&(t=location.protocol+"//"+location.host+"/JobSearch.Web");var n=t+"/index.html#/download_resume/"+e.id;e.emailLink="mailto:?subject=Resume&body="+encodeURIComponent(n)}e.searchText=angular.isUndefinedOrNull(a)?"":a,e.id=i.parentDocumentId,e.resumeSource="",e.currentPage=i.pageNumber,e.totalPages=i.totalPages,e.resume=i,null==e.resume.adminTags&&(e.resume.adminTags=[]),null==e.resume.adminNotes&&(e.resume.adminNotes=[]),e.itemsPerPage=1,e.maxSize=5,e.shareBoxVisible=!1,e.isShowAdminNotes=!1,e.isShowAdminTags=!1,e.adminTag="",e.adminNote="",l();var c=function(){n.getPageUrl(e.id,e.currentPage).then(function(t){var n=t.data.content,r=location.protocol+"//"+location.host;-1!=location.pathname.indexOf("JobSearch.Web")&&(r=location.protocol+"//"+location.host+"/JobSearch.Web");var s=r+"/pdf-viewer/web/viewer.html?file="+window.escape(n)+"#page=1&zoom=page-fit&search="+e.searchText+"&phrase=false&hlall=true";e.resumeSource=s},function(t){console.log(t.data.message),e.resumeSource=""})};c(),e.search=function(){n.searchIntoPageResume(e.id,e.currentPage,e.searchText).then(function(t){e.resume=t.data,e.currentPage=e.resume.pageNumber,e.totalPages=e.resume.totalPages,null==e.resume.adminTags&&(e.resume.adminTags=[]),null==e.resume.adminNotes&&(e.resume.adminNotes=[]),c()},function(e){console.log(e.data.message)})},e.pageChanged=function(){c()},e.ClickOnNeighborsPage=function(t,n){e.currentPage=t,c()},e.close=function(){t.close()},e.dowloadResume=function(){n.getNativeUrl(e.id).then(function(e){var t=e.data.content,n=angular.element("<a></a>");n.attr("href",t),n[0].click()},function(e){console.log(e.data.message)})},e.openShare=function(){e.shareBoxVisible=!0},window.onclick=function(){e.shareBoxVisible&&(e.shareBoxVisible=!1)},e.printElem=function(){var e=document.getElementById("pdfViewer");e.focus(),e.contentWindow.print()},e.addAdminTag=function(){if(-1==e.resume.adminTags.indexOf(e.adminTag)){var t=e.resume.adminTags.slice(0);t.push(e.adminTag);var r={Tags:t};n.addAdminTags(e.id,e.currentPage,r).then(function(t){e.resume.adminTags.push(e.adminTag),e.adminTag=""},function(e){console.log(e.data.message)})}},e.removeAdminTag=function(t){var r=e.resume.adminTags.slice(0);r.splice(t,1);var s={Tags:r};n.addAdminTags(e.id,e.currentPage,s).then(function(n){e.resume.adminTags.splice(t,1)},function(e){console.log(e.data.message)})},e.addAdminNote=function(){if(-1==e.resume.adminNotes.indexOf(e.adminNote)){var t=e.resume.adminNotes.slice(0);t.push(e.adminNote);var r={Notes:t};n.addAdminNotes(e.id,e.currentPage,r).then(function(t){e.resume.adminNotes.push(e.adminNote),e.adminNote=""},function(e){console.log(e.data.message)})}},e.removeAdminNote=function(t){var r=e.resume.adminNotes.slice(0);r.splice(t,1);var s={Notes:r};n.addAdminNotes(e.id,e.currentPage,s).then(function(n){e.resume.adminNotes.splice(t,1)},function(e){console.log(e.data.message)})}}]),angular.module("Jobsite").controller("ResetPasswordController",["$scope","$http","$timeout","$location","AuthService","RESOURCES",function(e,t,n,r,s,o){o.API_BASE_PATH;e.usernameOrEmail="",e.error_Description="",e.success_Description="",e.ResetPassword=function(t){if(e.error_Description="",e.success_Description="",t){var n={usernameOrEmail:e.usernameOrEmail};s.resetPasswordToken(n).then(function(t){e.success_Description="We sent a password-reset link to your email!"},function(t){var n=[];for(var r in t.data.ModelState)for(var s=0;s<t.data.ModelState[r].length;s++)n.push(t.data.ModelState[r][s]);e.error_Description="Failed to reset password due to: "+n.join(" ")})}}}]),angular.module("Jobsite").controller("ResetPasswordVerifyController",["$scope","$http","$timeout","$location","AuthService","RESOURCES",function(e,t,n,r,s,o){var i=(o.API_BASE_PATH,r.search());e.password="",e.confirmPassword="",e.error_Description="",e.success_Description="";var a=function(){var e=n(function(){n.cancel(e),r.path("/login")},2e3)};e.ChangePassword=function(t){if(e.error_Description="",e.success_Description="",t){if(e.password!=e.confirmPassword)return void(e.error_Description="Passwords does not match!");var n={newPassword:e.password,userId:i.userid,code:i.code};s.resetPassword(n).then(function(t){e.success_Description="Password successfully changed, you will be redicted to login page in 2 seconds.",a()},function(t){var n=[];for(var r in t.data.ModelState)for(var s=0;s<t.data.ModelState[r].length;s++)n.push(t.data.ModelState[r][s]);e.error_Description="Failed to reset password due to: "+n.join(" ")})}}}]),angular.module("Jobsite").controller("ScreeningsController",["$scope","$http","$timeout","$location","ScreeningsService",function(e,t,n,r,s){e.currentPage=1,e.entryLimits=[5,10,20,50,100],s.getMyScreenings().then(function(t){e.list=t.data,e.currentPage=1,e.entryLimit=10,e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)}),e.deleterecords=function(t){s.deleteScreening(t.id).then(function(n){e.list.splice(e.list.indexOf(t),1),e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)})},e.setPage=function(t){e.currentPage=t},e.filter=function(){n(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse}}]),angular.module("Jobsite").controller("CreateScreeningController",["$scope","$http","$timeout","$location","ScreeningsService","CategoriesService","JobsService","$state","$stateParams","$modal",function(e,t,n,r,s,o,i,a,l,c){e.id=l.id,e.screening={},e.screening.sort=0,o.getCategories().then(function(t){e.categories=t.data},function(e){console.log(e.data.message)}),i.getMyJobs().then(function(t){e.jobs=t.data},function(e){console.log(e.data.message)}),angular.isUndefined(e.id)||""==e.id||s.getScreening(e.id).then(function(t){var n=t.data;e.screening.title=n.title,e.screening.description=n.description,e.screening.sort=n.sort,e.screening.isAutoSend=n.isAutoSend,e.screening.timeToComplete=n.timeToComplete,e.screening.categoryId=n.categoryId,e.screening.jobsIds=n.jobsIds,e.screening.tags=n.tags},function(e){console.log(e.data.message)}),e.saveChanges=function(t){t&&(angular.isUndefined(e.id)||""==e.id?s.postScreening(e.screening).then(function(t){e.saveAndExit?a.go("screenings"):a.go("createscreeningquestion",{id:t.data.id})},function(e){console.log(e.data.message)}):s.putScreening(e.id,e.screening).then(function(t){a.go("editscreening",{id:e.id})},function(e){console.log(e.data.message)}))},e.cancel=function(){angular.isUndefined(e.id)||""==e.id?a.go("screenings"):a.go("editscreening",{id:e.id})},e.jobsChanged=function(){null!=e.screening.jobsIds&&1==e.screening.jobsIds.length&&s.getNewOrder(e.screening.jobsIds[0]).then(function(t){e.screening.sort=parseInt(t.data.content)},function(e){console.log(e.data.message)})},e.manageTags=function(){var t=c.open({animation:!0,templateUrl:"views/ManageTags.html",controller:"ManageTagsController",size:"md",resolve:{screening:function(){return e.screening}}});t.result.then(function(t){t&&(e.screening.tags=t.tags)},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("Jobsite").controller("CreateScreeningQuestionController",["$scope","$http","$timeout","$location","ScreeningsService","$state","$stateParams","RESOURCES","$filter",function(e,t,n,r,s,o,i,a,l){e.id=i.id,e.type=i.type,e.questionId=i.questionId,e.mode="create",angular.isUndefined(e.questionId)||""==e.questionId||(e.mode="edit"),e.questionsCount=0,e.screeningQuestion={},e.screeningQuestion.tags=[],e.ScreeningQuestionTypes=a.SCREENING_QUESTION_TYPES,e.screeningQuestion.options=[],e.screeningQuestion.optionsDescriptions={},e.numOptionsLikertScale=[3,5,7,9],e.numOptionsSelected="",e.screeningTags=[],s.getScreening(e.id).then(function(t){var n=t.data;e.screeningTags=n.tags,null==e.screeningTags&&(e.screeningTags=[]),e.questionsCount=n.questionsCount},function(e){console.log(e.data.message)});var c=function(t){var n=l("filter")(e.screeningTags,{parentName:t.name},!0);if(null!=n&&n.length>0)for(var r=0;r<n.length;r++)n[r].isCategory&&(n=n.concat(e.getChildsTags(n[r])));return n};e.getChildsTags=function(e){var t=c(e);return l("filter")(t,{isCategory:!1},!0)};var u=function(e,t){for(var n=c(t),r=e.split("/"),s=0;s<n.length;s++){if(r.length>1&&n[s].parentName==r[0]&&n[s].name==r[1])return!0;if(n[s].name==r[0])return!0}return!1};"edit"==e.mode&&s.getScreeningQuestionById(e.id,e.questionId).then(function(t){if(e.screeningQuestion=t.data,(angular.isUndefined(e.screeningQuestion.tags)||null==e.screeningQuestion.tags)&&(e.screeningQuestion.tags=[]),"TrueFalse"==e.screeningQuestion.type&&(e.screeningQuestion.options=["True","False"],e.selectedOption=e.screeningQuestion.answerBoolean?"0":"1"),"LikertScale"==e.screeningQuestion.type&&(e.numOptionsSelected=e.screeningQuestion.options.length),"MultipleChoice"==e.screeningQuestion.type&&(e.selectedOption=e.screeningQuestion.answerOption.toString()),null==t.data.tags)e.screeningQuestion.tags=[];else for(var n=angular.copy(t.data.tags),r=l("filter")(e.screeningTags,{level:1,isCategory:!0},!0),s=0;s<r.length;s++){var o=r[s],i=$.grep(n,function(e,t){return u(e,o)});i?e.screeningQuestion.tags[s]=i[0]:e.screeningQuestion.tags[s]=""}},function(e){console.log(e.data.message)}),e.saveChanges=function(t){t&&("TrueFalse"==e.screeningQuestion.type&&(e.screeningQuestion.options=[],e.screeningQuestion.answerText="",e.screeningQuestion.answerBoolean="0"==e.selectedOption),"MultipleChoice"==e.screeningQuestion.type&&(e.screeningQuestion.answerText="",e.screeningQuestion.answerOption=parseInt(e.selectedOption)),"FillIn"==e.screeningQuestion.type&&(e.screeningQuestion.options=[]),"edit"==e.mode?s.putScreeningQuestion(e.id,e.questionId,e.screeningQuestion).then(function(t){e.saveAndExit?o.go("editscreening",{id:e.id}):(e.questionsCount++,e.screeningQuestion={},e.screeningQuestion.options=[],e.screeningQuestion.answerText="",e.screeningQuestion.tags=[],e.tag="",e.selectedOption="",e.screeningQuestion.type="",e.option="")},function(e){console.log(e.data.message)}):s.postScreeningQuestion(e.id,e.screeningQuestion).then(function(t){e.saveAndExit?"editscreening"==e.type?o.go("editscreening",{id:e.id}):o.go("screenings"):(e.questionsCount++,e.screeningQuestion={},e.screeningQuestion.options=[],e.screeningQuestion.answerText="",e.screeningQuestion.tags=[],e.tag="",e.selectedOption="",e.screeningQuestion.type="",e.option="")},function(e){console.log(e.data.message)}))},e.cancel=function(){"editscreening"==e.type?o.go("editscreening",{id:e.id}):o.go("screenings")},e.changedQuestionType=function(){"TrueFalse"==e.screeningQuestion.type?(e.screeningQuestion.options=["True","False"],e.option="",e.selectedOption="",e.screeningQuestion.optionsDescriptions={}):"LikertScale"==e.screeningQuestion.type?(e.screeningQuestion.options=[],e.option="",e.selectedOption="",e.screeningQuestion.optionsDescriptions={}):(e.screeningQuestion.options=[],e.option="",e.selectedOption="",e.screeningQuestion.optionsDescriptions={})},e.addOption=function(){-1==e.screeningQuestion.options.indexOf(e.option)&&(e.screeningQuestion.options.push(e.option),e.option="")},e.removeOption=function(t){e.options.splice(t-1,1)},e.addtags=function(){-1==e.screeningQuestion.tags.indexOf(e.tag)&&(e.screeningQuestion.tags.push(e.tag),e.tag="")},e.removetag=function(t){e.screeningQuestion.tags.splice(t-1,1)},e.changedNumOptionsLikertScale=function(){if(e.screeningQuestion.options=[],e.screeningQuestion.optionsDescriptions={},e.numOptionsSelected&&parseInt(e.numOptionsSelected)>=3)for(var t=1;t<=parseInt(e.numOptionsSelected);t++)e.screeningQuestion.options.push(t),e.screeningQuestion.optionsDescriptions[t]=""}}]),angular.module("Jobsite").controller("StartTestScreeningController",["$scope","$http","$timeout","$location","AuthService","ScreeningsService","CategoriesService","ResumesService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l,c){if(s.authentication.isAuth&&s.authentication.isUser)e.error_message="",e.resumeId=c.id,e.screeningId=c.screeningId,e.jobId=c.jobId,e.resume={},e.screening={},e.error_message="",e.isDisabledStart=!1,a.getApplicant(e.jobId,e.resumeId).then(function(t){e.resume=t.data},function(e){console.log(e.data.message)}),o.getScreeningByResumeId(e.jobId,e.resumeId,e.screeningId).then(function(t){e.screening=t.data,0==e.screening.questionsCount&&(e.error_message="Screening does not have any questions! Please try again later!",e.isDisabledStart=!0)},function(e){console.log(e.data.message)}),e.start=function(){if(e.error_message="",0==e.screening.questionsCount)return void(e.error_message="Screening does not have any questions!");if(null!=e.resume.screeningIds&&e.resume.screeningIds.length>0){var t=[];null!=e.resume.passedScreeningIds&&(t=e.resume.passedScreeningIds);var n=e.resume.screeningIds.diff(t);n.length>0&&-1!=n.indexOf(e.screeningId)?l.go("testscreening",{id:e.resumeId,screeningId:e.screeningId,jobId:e.jobId}):e.error_message="You have already passed screening!"}else e.error_message="You don not have any screenings!"};else{var u=r.path();sessionStorage.setItem("return_url",u),l.transitionTo("login")}}]),Array.prototype.diff=function(e){return this.filter(function(t){return e.indexOf(t)<0})},angular.module("Jobsite").controller("FinishTestScreeningController",["$scope","$http","$timeout","$location","ScreeningsService","CategoriesService","ResumesService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.close=function(){a.go("dashboard")}}]),angular.module("Jobsite").controller("TestScreeningController",["$scope","$rootScope","$http","$timeout","$location","ScreeningsService","CategoriesService","ResumesService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l,c){var u=!1,d=function(){u?u&&!e.timerRunning&&(e.$broadcast("timer-resume"),e.timerRunning=!0):(e.$broadcast("timer-start"),e.timerRunning=!0,u=!0)},g=function(){u&&e.timerRunning&&(e.$broadcast("timer-stop"),e.timerRunning=!1)};d(),e.$on("timer-tick",function(t,n){e.timerRunning===!0&&(e.millis=n.millis)});var f=0;e.resumeId=c.id,e.screeningId=c.screeningId,e.jobId=c.jobId,e.currentQuestionNumber=0,e.screening={},e.screeningQuestion={},e.resultQuestion={},o.getScreeningByResumeId(e.jobId,e.resumeId,e.screeningId).then(function(t){e.screening=t.data,m()},function(e){console.log(e.data.message)});var m=function(){e.currentQuestionNumber++,o.getScreeningQuestionByResumeId(e.jobId,e.resumeId,e.screeningId,e.currentQuestionNumber).then(function(t){e.screeningQuestion=t.data},function(e){console.log(e.data.message)})};e.saveChanges=function(t){if(t){g(),"TrueFalse"==e.screeningQuestion.type&&(e.resultQuestion.answerText="",e.resultQuestion.answerOption=0,e.resultQuestion.answerBoolean="true"==e.resultQuestion.answerBoolean),"MultipleChoice"==e.screeningQuestion.type&&(e.resultQuestion.answerText="",e.resultQuestion.answerBoolean=!1,e.resultQuestion.answerOption=parseInt(e.resultQuestion.answerOption)),"FillIn"==e.screeningQuestion.type&&(e.resultQuestion.answerOption=0,e.resultQuestion.answerBoolean=!1);var n=e.millis/1e3;e.resultQuestion.timeToComplete=n-f,f=n,o.setResultOnScreeningQuestion(e.jobId,e.resumeId,e.screeningId,e.screeningQuestion.id,e.resultQuestion).then(function(t){e.saveAndExit?l.go("finishtestscreening"):(e.resultQuestion={},m(),d())},function(e){console.log(e.data.message),d()})}}}]),angular.module("Jobsite").controller("TestResultController",["$scope","$modalInstance","JobsService","ScreeningsService","$sce","$timeout","$document","resume","jobId",function(e,t,n,r,s,o,i,a,l){e.resume=a,n.getJob(l).then(function(t){response=t.data,e.job=response},function(e){console.log(e.data.message)}),r.getTestResultsByResumeId(l,e.resume.id).then(function(t){response=t.data,e.results=response},function(e){console.log(e.data.message)}),e.onClose=function(){t.close()}}]),angular.module("Jobsite").controller("SetReferralController",["$scope","$modalInstance","JobsService","ScreeningsService","$sce","$timeout","$document","referralFeePercent","referralFeeAmount","jobTitle",function(e,t,n,r,s,o,i,a,l,c){e.referralFeePercent=a,e.referralFeeAmount=l,e.referralFeePercentList=[];for(var u=1;10>u;u++)e.referralFeePercentList.push(5*u);e.agreeTerm=!angular.isUndefined(a)&&null!=a||!angular.isUndefined(l)&&null!=l,e.jobTitle=c,e.message="",e.onClose=function(){t.close({referralFeePercent:a,referralFeeAmount:l})},angular.isUndefined(a)||null==a||(e.feeType="percent"),angular.isUndefined(l)||null==l||(e.feeType="fixed"),e.changeFeeType=function(){"percent"==e.feeType&&(e.referralFeeAmount=null),"fixed"==e.feeType&&(e.referralFeePercent=null)},e.onSave=function(){return!angular.isUndefined(e.referralFeePercent)&&null!=e.referralFeePercent||!angular.isUndefined(e.referralFeeAmount)&&null!=e.referralFeeAmount?void t.close({referralFeePercent:e.referralFeePercent,referralFeeAmount:e.referralFeeAmount}):void(e.message="You don not fill Referral Fee!")}}]),angular.module("Jobsite").controller("SendReferralController",["$scope","$modalInstance","JobsService","ScreeningsService","$sce","$timeout","$document","ReferralService","jobId","jobTitle","referralText",function(e,t,n,r,s,o,i,a,l,c,u){e.referralText=u,e.emailObjects=[];for(var d=0;1>d;d++)e.emailObjects.push({email:"",firstName:"",lastName:""});e.agreeTerm=!1,e.jobTitle=c,e.jobId=l,e.message="",e.onClose=function(){t.close()},e.addRecepient=function(){e.emailObjects.length>=3||e.emailObjects.push({email:"",firstName:"",lastName:""})},e.removeRecepient=function(t){e.emailObjects.length<=1||e.emailObjects.splice(t,1)},e.onSave=function(n){if(e.message="",!n)return void(e.message="Check input data!");for(var r=!1,s=0;s<e.emailObjects.length;s++){var o=e.emailObjects[s];angular.isUndefined(o.email)||null==o.email||""==o.email||(r=!0)}if(!r)return void(e.message="You do not fill emails!");var i={jobId:e.jobId,recepients:e.emailObjects};a.postReferral(i).then(function(e){t.close()},function(t){e.message="Error occured!",console.log(t.data.message)})}}]),angular.module("Jobsite").controller("SendScreeningController",["$scope","$modalInstance","JobsService","ScreeningsService","$sce","$timeout","$document","resume","jobId",function(e,t,n,r,s,o,i,a,l){e.resume=a,e.screeningsTaken=[],e.screeningsToTake=[],e.screeningsAll=[],e.screeningsToTakeSelected=[],e.successMessage=!1,e.errorMessage=!1,n.getJob(l).then(function(t){response=t.data,e.job=response},function(e){console.log(e.data.message)}),r.getMyScreenings().then(function(t){response=t.data,e.screeningsAll=response.filter(function(e){return-1!=e.jobsIds.indexOf(l)}),e.screeningsTaken=e.screeningsAll.filter(function(t){return null==e.resume.screeningIds?!1:-1!=t.jobsIds.indexOf(l)&&-1!=e.resume.screeningIds.indexOf(t.id)}),e.screeningsToTake=e.screeningsAll.filter(function(t){return null==e.resume.screeningIds?!0:-1!=t.jobsIds.indexOf(l)&&-1==e.resume.screeningIds.indexOf(t.id)})},function(e){console.log(e.data.message)}),e.onClose=function(){t.close()},e.notify=function(){r.sendScreeningsToResume(l,e.resume.id,{screeningIds:e.screeningsToTakeSelected}).then(function(n){e.successMessage=!0,o(function(){t.close()},1e3)},function(t){e.errorMessage=!0})}}]),angular.module("Jobsite").controller("ResumesController",["$scope","AuthService","$location","SearchResumesParameters","$modal","$timeout","ResumesService",function(e,t,n,r,s,o,i){function a(){i.getMyResumes().then(function(t){e.list=t.data,e.currentPage=1,e.entryLimit=10,e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)})}e.currentPage=1,e.entryLimits=[5,10,20,50,100],a(),e.deleterecords=function(e){i.deleteResume(e).then(function(e){a()},function(e){console.log(e.data.message)})},e.setPage=function(t){e.currentPage=t},e.filter=function(){o(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse},e.arrayEmptyJob=function(e){return!angular.isUndefined(e.title)&&null!=e.title&&""!=e.title},e.createOrEditResume=function(e){var t=s.open({animation:!0,templateUrl:"views/CreateOrEditResume.html",controller:"CreateOrEditResumeController",size:"lg",resolve:{resumeId:function(){return e}}});t.result.then(function(e){angular.isUndefined(e)||null==e||angular.isUndefined(e.isUpdated)||null==e.isUpdated||!e.isUpdated||a()},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("Jobsite").controller("ReferralsController",["$scope","JobsService","ReferralService","$sce","$timeout","$document",function(e,t,n,r,s,o){e.currentPage=1,e.entryLimits=[5,10,20,50,100],n.getMyJobReferrals().then(function(t){e.list=t.data,e.currentPage=1,e.entryLimit=10,e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)}),e.deleterecords=function(t){n.deleteJobReferral(t.id).then(function(n){e.list.splice(e.list.indexOf(t),1),e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)})},e.setPage=function(t){e.currentPage=t},e.filter=function(){s(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse}}]),angular.module("Jobsite").controller("DownloadResumeController",["$scope","ResumesService","$sce","$timeout","$stateParams",function(e,t,n,r,s){e.id=s.id,t.getNativeUrl(e.id).then(function(e){var t=e.data.content,n=angular.element("<a></a>");n.attr("href",t),n[0].click()},function(e){console.log(e.data.message)})}]),angular.module("Jobsite").controller("CreateOrEditResumeController",["$scope","$modalInstance","UsersService","ResumesService","$sce","$timeout","resumeId",function(e,t,n,r,s,o,i){e.id=i,e.resume={},e.resume.tags=[],e.loading=!1,e.message="",n.getMyInfo().then(function(t){e.user=t.data},function(e){console.log(e.data.message)}),angular.isUndefined(e.id)||""==e.id||r.getResume(e.id).then(function(t){var n=t.data;e.resume.title=n.title,e.resume.description=n.description,e.resume.tags=n.tags,null==e.resume.tags&&(e.resume.tags=[]),e.resume.originalFilename=n.originalFilename,e.resume.storageLocationNative=n.storageLocationNative},function(e){console.log(e.data.message)}),e.uploadFile=function(t){e.loading=!0;var n=t.target.files[0];r.uploadResume(n).then(function(t){var n=t.data;e.resume.storageLocationNative=n.storageLocationNative,e.resume.originalFilename=n.originalFilename,e.loading=!1},function(t){e.loading=!1,console.log(t.data.message),alert("Resume upload failed")})},e.onClose=function(){t.close()},e.saveChanges=function(n){return n&&e.resume.originalFilename?void(angular.isUndefined(e.id)||""==e.id?r.postResume(e.resume).then(function(e){t.close({isUpdated:!0})},function(e){console.log(e.data.message)}):r.putResume(e.id,e.resume).then(function(e){t.close({isUpdated:!0})},function(e){console.log(e.data.message)})):void(e.message="You don't fill all fields")},e.addtags=function(){-1==e.resume.tags.indexOf(e.tag)&&(e.resume.tags.push(e.tag),e.tag="")},e.removetag=function(t){e.resume.tags.splice(t-1,1)}}]),angular.module("Jobsite").controller("CreateReferralController",["$scope","$http","$timeout","$location","ReferralService","CategoriesService","JobsService","$state","$stateParams","$modal",function(e,t,n,r,s,o,i,a,l,c){e.id=l.id,e.referral={},e.referral.sort=0,o.getCategories().then(function(t){e.categories=t.data},function(e){console.log(e.data.message)}),i.getMyJobs().then(function(t){e.jobs=t.data},function(e){console.log(e.data.message)}),angular.isUndefined(e.id)||""==e.id||s.getJobReferral(e.id).then(function(t){var n=t.data;e.referral.title=n.title,e.referral.description=n.description,e.referral.categoryId=n.categoryId,e.referral.jobsIds=n.jobsIds,e.referral.tags=n.tags},function(e){console.log(e.data.message)}),e.saveChanges=function(t){t&&(angular.isUndefined(e.id)||""==e.id?s.postJobReferral(e.referral).then(function(t){e.saveAndExit?a.go("referrals"):a.go("createreferralquestion",{id:t.data.id})},function(e){console.log(e.data.message)}):s.putJobReferral(e.id,e.referral).then(function(t){a.go("editreferral",{id:e.id})},function(e){console.log(e.data.message)}))},e.cancel=function(){angular.isUndefined(e.id)||""==e.id?a.go("referrals"):a.go("editreferral",{id:e.id})},e.manageTags=function(){var t=c.open({animation:!0,templateUrl:"views/ManageTags.html",controller:"ManageTagsController",size:"md",resolve:{screening:function(){return e.referral}}});t.result.then(function(t){t&&(e.referral.tags=t.tags)},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("Jobsite").controller("CreateReferralQuestionController",["$scope","$http","$timeout","$location","ReferralService","$state","$stateParams","RESOURCES","$filter",function(e,t,n,r,s,o,i,a,l){e.id=i.id,e.type=i.type,e.questionsCount=0,e.questionId=i.questionId,e.mode="create",angular.isUndefined(e.questionId)||""==e.questionId||(e.mode="edit"),e.referralQuestion={},e.referralQuestion.tags=[],e.ScreeningQuestionTypes=a.REFERENCES_QUESTION_TYPES,e.referralQuestion.options=[],e.referralQuestion.optionsDescriptions={},e.numOptionsLikertScale=[3,5,7,9],e.numOptionsSelected="",e.GradeQuestionSubTypes=a.GRADE_QUESTION_SUB_TYPES;var c=function(t){var n=l("filter")(e.referencesTags,{parentName:t.name},!0);if(null!=n&&n.length>0)for(var r=0;r<n.length;r++)n[r].isCategory&&(n=n.concat(e.getChildsTags(n[r])));return n};e.getChildsTags=function(e){var t=c(e);return l("filter")(t,{isCategory:!1},!0)};var u=function(e,t){for(var n=c(t),r=e.split("/"),s=0;s<n.length;s++){if(r.length>1&&n[s].parentName==r[0]&&n[s].name==r[1])return!0;if(n[s].name==r[0])return!0}return!1};s.getJobReferral(e.id).then(function(t){var n=t.data;e.questionsCount=n.questionsCount,e.referencesTags=n.tags},function(e){console.log(e.data.message)}),"edit"==e.mode&&s.getReferralQuestionById(e.id,e.questionId).then(function(t){if(e.referralQuestion=t.data,(angular.isUndefined(e.referralQuestion.tags)||null==e.referralQuestion.tags)&&(e.referralQuestion.tags=[]),"LikertScale"==e.referralQuestion.type&&(e.numOptionsSelected=e.referralQuestion.options.length),null==t.data.tags)e.referralQuestion.tags=[];else{var n=angular.copy(t.data.tags);if(null!=e.referencesTags)for(var r=l("filter")(e.referencesTags,{level:1,isCategory:!0},!0),s=0;s<r.length;s++){var o=r[s],i=$.grep(n,function(e,t){return u(e,o)});i?e.referralQuestion.tags[s]=i[0]:e.referralQuestion.tags[s]=""}}},function(e){console.log(e.data.message)}),e.saveChanges=function(t){t&&("TrueFalse"==e.referralQuestion.type&&(e.referralQuestion.options=[],
e.referralQuestion.answerText=""),"MultipleChoice"==e.referralQuestion.type&&(e.referralQuestion.answerText=""),"FillIn"==e.referralQuestion.type&&(e.referralQuestion.options=[]),"Grade"==e.referralQuestion.type&&(e.referralQuestion.answerText=""),"edit"==e.mode?s.putReferralQuestion(e.id,e.questionId,e.referralQuestion).then(function(t){e.saveAndExit?o.go("editreferral",{id:e.id}):(e.questionsCount++,e.referralQuestion={},e.referralQuestion.options=[],e.referralQuestion.answerText="",e.referralQuestion.tags=[],e.tag="",e.referralQuestion.type="",e.option="")},function(e){console.log(e.data.message)}):s.postReferralQuestion(e.id,e.referralQuestion).then(function(t){e.saveAndExit?"editreferral"==e.type?o.go("editreferral",{id:e.id}):o.go("referrals"):(e.questionsCount++,e.referralQuestion={},e.referralQuestion.options=[],e.referralQuestion.answerText="",e.referralQuestion.tags=[],e.tag="",e.referralQuestion.type="",e.option="")},function(e){console.log(e.data.message)}))},e.cancel=function(){o.go("referrals")},e.changedQuestionType=function(){"TrueFalse"==e.referralQuestion.type?(e.referralQuestion.options=["True","False"],e.option="",e.referralQuestion.optionsDescriptions={}):"LikertScale"==e.referralQuestion.type?(e.referralQuestion.options=[],e.option="",e.referralQuestion.optionsDescriptions={}):(e.referralQuestion.options=[],e.option="",e.referralQuestion.optionsDescriptions={})},e.addOption=function(){-1==e.referralQuestion.options.indexOf(e.option)&&(e.referralQuestion.options.push(e.option),e.option="")},e.removeOption=function(t){e.options.splice(t-1,1)},e.addtags=function(){-1==e.referralQuestion.tags.indexOf(e.tag)&&(e.referralQuestion.tags.push(e.tag),e.tag="")},e.removetag=function(t){e.referralQuestion.tags.splice(t-1,1)},e.changedNumOptionsLikertScale=function(){if(e.referralQuestion.options=[],e.referralQuestion.optionsDescriptions={},e.numOptionsSelected&&parseInt(e.numOptionsSelected)>=3)for(var t=1;t<=parseInt(e.numOptionsSelected);t++)e.referralQuestion.options.push(t),e.referralQuestion.optionsDescriptions[t]=""}}]),angular.module("Jobsite").controller("EditScreeningController",["$scope","$http","$timeout","$location","ScreeningsService","CategoriesService","JobsService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.id=l.id,e.currentPage=1,e.entryLimits=[5,10,20,50,100],e.entryLimit=10,s.getScreening(e.id).then(function(t){e.screening=t.data},function(e){console.log(e.data.message)});var c=function(){s.getScreeningQuestionsByScreeningId(e.id).then(function(t){e.screeningQuestions=t.data,e.currentPage=1,e.entryLimit=10,e.filteredItems=e.screeningQuestions.length,e.totalItems=e.screeningQuestions.length},function(e){console.log(e.data.message)})};c(),e.setPage=function(t){e.currentPage=t},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse},e.deleterecords=function(e){s.deleteScreeningQuestion(e.screeningId,e.id).then(function(e){c()},function(e){console.log(e.data.message)})}}]),angular.module("Jobsite").controller("ScreeningAssignController",["$scope","$http","$timeout","$location","$filter","ScreeningsService","JobsService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.myScreeningId=l.id,e.selectedJobId="";var c=function(t){return s("filter")(e.screenings,{id:t})[0]},u=function(){var t=s("filter")(e.screenings,e.jobExist);return s("orderBy")(t,"sort")};o.getMyScreenings().then(function(t){e.screenings=t.data,e.myScreening=c(e.myScreeningId);e.myScreening.jobsIds;i.getMyJobs().then(function(t){e.jobs=s("filter")(t.data,e.jobAlreadyAssign)},function(e){console.log(e.data.message)})},function(e){console.log(e.data.message)}),e.saveChanges=function(){o.putScreening(e.myScreeningId,e.myScreening).then(function(t){a.go("editscreening",{id:e.myScreeningId})},function(e){console.log(e.data.message)})},e.jobAlreadyAssign=function(t){return-1==e.myScreening.jobsIds.indexOf(t.id)},e.jobExist=function(t){return-1!=t.jobsIds.indexOf(e.selectedJobId)},e.addMyScreening=function(){if(-1==e.myScreening.jobsIds.indexOf(e.selectedJobId)){var t=e.myScreening.sort,n=u();null!=n&&n.length>0&&(t=n[n.length-1].sort,t++),e.myScreening.sort=t,e.myScreening.jobsIds.push(e.selectedJobId)}}}]),angular.module("Jobsite").controller("EditReferralController",["$scope","$http","$timeout","$location","ReferralService","CategoriesService","JobsService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.id=l.id,e.currentPage=1,e.entryLimits=[5,10,20,50,100],e.entryLimit=10,s.getJobReferral(e.id).then(function(t){e.referral=t.data},function(e){console.log(e.data.message)});var c=function(){s.getReferralQuestionsByJobReferralId(e.id).then(function(t){e.referralQuestions=t.data,e.currentPage=1,e.entryLimit=10,e.filteredItems=e.referralQuestions.length,e.totalItems=e.referralQuestions.length},function(e){console.log(e.data.message)})};c(),e.setPage=function(t){e.currentPage=t},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse},e.deleterecords=function(e){s.deleteReferralQuestion(e.jobReferralId,e.id).then(function(e){c()},function(e){console.log(e.data.message)})}}]),angular.module("Jobsite").controller("ReferralAssignController",["$scope","$http","$timeout","$location","$filter","ReferralService","JobsService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.myReferralId=l.id,e.selectedJobId="";var c=function(t){return s("filter")(e.referrals,{id:t})[0]},u=function(){var t=s("filter")(e.referrals,e.jobExist);return s("orderBy")(t,"sort")};o.getMyJobReferrals().then(function(t){e.referrals=t.data,e.myReferral=c(e.myReferralId),i.getMyJobs().then(function(t){e.jobs=s("filter")(t.data,e.jobAlreadyAssign)},function(e){console.log(e.data.message)})},function(e){console.log(e.data.message)}),e.saveChanges=function(){o.putJobReferral(e.myReferralId,e.myReferral).then(function(t){a.go("editreferral",{id:e.myReferralId})},function(e){console.log(e.data.message)})},e.jobAlreadyAssign=function(t){return-1==e.myReferral.jobsIds.indexOf(t.id)},e.jobExist=function(t){return-1!=t.jobsIds.indexOf(e.selectedJobId)},e.addMyReferral=function(){if(-1==e.myReferral.jobsIds.indexOf(e.selectedJobId)){var t=e.myReferral.sort,n=u();null!=n&&n.length>0&&(t=n[n.length-1].sort,t++),e.myReferral.sort=t,e.myReferral.jobsIds.push(e.selectedJobId)}}}]),angular.module("Jobsite").controller("SendReferenceRequestController",["$scope","$modalInstance","JobsService","ReferralService","$sce","$timeout","$document","resume","jobId",function(e,t,n,r,s,o,i,a,l){e.resume=a,e.referencesTaken=[],e.referencesToTake=[],e.referencesAll=[],e.referencesToTakeSelected=[],e.successMessage=!1,e.errorMessage=!1,n.getJob(l).then(function(t){response=t.data,e.job=response},function(e){console.log(e.data.message)}),r.getMyJobReferrals().then(function(t){response=t.data,e.referencesAll=response.filter(function(e){return null==e.jobsIds?!1:-1!=e.jobsIds.indexOf(l)}),e.referencesTaken=e.referencesAll.filter(function(t){return null==e.resume.referencesIds?!1:-1!=t.jobsIds.indexOf(l)&&-1!=e.resume.referencesIds.indexOf(t.id)}),e.referencesToTake=e.referencesAll.filter(function(t){return null==e.resume.referencesIds?!0:-1!=t.jobsIds.indexOf(l)&&-1==e.resume.referencesIds.indexOf(t.id)})},function(e){console.log(e.data.message)}),e.onClose=function(){t.close()},e.notify=function(){r.sendReferenceRequestToResume(l,e.resume.id,{jobReferralIds:e.referencesToTakeSelected}).then(function(n){e.successMessage=!0,o(function(){t.close()},1e3)},function(t){e.errorMessage=!0})}}]),angular.module("Jobsite").controller("SendReferenceToFriendsController",["$scope","JobsService","ScreeningsService","$sce","$timeout","$document","ReferralService","RESOURCES",function(e,t,n,r,s,o,i,a){e.job={},e.referenceId="",e.reference={},e.WorkingRelationshipTypes=a.WORKING_RELATIONSHIP_TYPES,e.yearsList=[];for(var l=1;20>=l;l++)e.yearsList.push(l);e.successMessage="",e.message="",e.friendsCount="";var c=function(){e.emailObjects=[];for(var t=0;1>t;t++)e.emailObjects.push({email:"",firstName:"",lastName:"",years:"",personTitle:"",workingRelationshipType:""});i.getReferenceCountToFriends(e.job.id,e.job.resumeId,e.referenceId).then(function(t){e.friendsCount=t.data.content,e.reference.isNew=0==e.friendsCount},function(t){e.message="Error occured!",console.log(t.data.message)})};e.sendReferenceToFriends=function(t){e.successMessage="",e.message="",e.friendsCount="",e.referenceId=t.id,e.reference=t,c()},e.onSave=function(t){if(e.message="",e.successMessage="",!t)return void(e.message="Check input data!");for(var n=!1,r=0;r<e.emailObjects.length;r++){var o=e.emailObjects[r];angular.isUndefined(o.email)||null==o.email||""==o.email||(n=!0)}if(!n)return void(e.message="You do not fill emails!");var a={jobId:e.job.id,resumeId:e.job.resumeId,referenceId:e.referenceId,recepients:e.emailObjects};i.sendReferenceToFriends(a).then(function(t){c(),e.successMessage="Successfully sent!",s(function(){e.successMessage=""},1e3)},function(t){e.message="Error occured!",console.log(t.data.message)})}}]),angular.module("Jobsite").controller("StartTestJobReferralController",["$scope","$http","$timeout","$location","AuthService","ReferralService","CategoriesService","ResumesService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l,c){e.jobId=c.jobId,e.resumeId=c.resumeId,e.jobReferralId=c.jobReferralId;var u=c.reference_friend_id;e.userName=c.userName,e.reference={},e.isDisabledStart=!1,e.error_message="",s.authentication.isAdministrator&&r.path("/logout");var d=function(){o.getReferenceByResumeId(e.jobId,e.resumeId,e.jobReferralId).then(function(t){e.reference=t.data,0==e.reference.questionsCount&&(e.error_message="Reference does not have any questions! Please try again later!",e.isDisabledStart=!0)},function(t){console.log(t.data),e.error_message=t.data,e.isDisabledStart=!0})},g=sessionStorage.getItem("reference_friend_ids"),f=[];if(null!=g&&(f=JSON.parse(g),null==f&&(f=[])),null!=u&&""!=u&&-1==f.indexOf(u))if(f.push(u),sessionStorage.setItem("reference_friend_ids",JSON.stringify(f)),s.authentication.isUser)s.trackReferences().then(function(e){d()},function(e){console.log(e.data.message)});else{var m=r.path();sessionStorage.setItem("return_url",m),l.transitionTo("logout")}else s.authentication.isUser?d():r.path("/logout");e.start=function(){return e.error_message="",0==e.reference.questionsCount?void(e.error_message="Reference does not have any questions!"):void(e.reference.isPassed?e.error_message="You have already passed reference!":l.go("testsjobreferral",{jobId:e.jobId,resumeId:e.resumeId,jobReferralId:e.jobReferralId}))}}]),Array.prototype.diff=function(e){return this.filter(function(t){return e.indexOf(t)<0})},angular.module("Jobsite").controller("TestJobReferralController",["$scope","$rootScope","$http","$timeout","$location","ReferralService","CategoriesService","ResumesService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l,c){e.jobId=c.jobId,e.resumeId=c.resumeId,e.jobReferralId=c.jobReferralId,e.successMessage="",e.errorMessage="",e.reference={},e.referenceQuestions={},e.resultQuestions=[],e.currentIndexQuestion=0,e.question={},e.state="",e.isLoading=!0,e.slider={value:50,options:{floor:0,ceil:100}};var u=function(){e.question=e.referenceQuestions[e.currentIndexQuestion]},d=function(){e.referenceQuestions.length>e.currentIndexQuestion+1&&e.currentIndexQuestion++,u()},g=function(){e.currentIndexQuestion-1>=0&&e.currentIndexQuestion--,u()};o.getReferenceByResumeId(e.jobId,e.resumeId,e.jobReferralId).then(function(t){e.reference=t.data,o.getReferenceQuestions(e.jobId,e.resumeId,e.jobReferralId).then(function(t){e.isLoading=!1,r(function(){e.referenceQuestions=t.data,u();for(var n=0;n<e.referenceQuestions.length;n++)e.resultQuestions[n]={referenceQuestionId:e.referenceQuestions[n].id,answerOption:50}},10)},function(t){console.log(t.data.message),e.isLoading=!1})},function(t){console.log(t.data.message),e.isLoading=!1}),e.saveChanges=function(t){if(e.successMessage="",!t)return void(e.errorMessage="Please fill out all mandatory fields!");if(e.errorMessage="","next"==e.state&&d(),"previous"==e.state&&g(),"save"==e.state){var n={results:e.resultQuestions};o.setAnswersOnReferenceQuestions(e.jobId,e.resumeId,e.jobReferralId,n).then(function(t){e.successMessage="Successfully saved!",r(function(){l.go("finishestsjobreferral",{jobId:e.jobId,resumeId:e.resumeId,jobReferralId:e.jobReferralId})},1e3)},function(t){e.errorMessage="Error occured",console.log(t.data.message)})}e.state=""}}]),angular.module("Jobsite").controller("AgreementController",["$scope","$modalInstance","$sce","$timeout","$document",function(e,t,n,r,s){e.resume=resume,JobsService.getJob(jobId).then(function(t){response=t.data,e.job=response},function(e){console.log(e.data.message)}),ScreeningsService.getTestResultsByResumeId(jobId,e.resume.id).then(function(t){response=t.data,e.results=response},function(e){console.log(e.data.message)}),e.onClose=function(){t.close()}}]),angular.module("Jobsite").controller("TraitifyController",["$scope","$rootScope","$http","$timeout","$location","$state","TraitifyService","$stateParams","RESOURCES",function(e,t,n,r,s,o,i,a,l){e.jobId=a.jobId,e.resumeId=a.resumeId,e.traitifyId=a.traitifyId,Traitify.setPublicKey(l.TRAITIFY_PUBLIC_KEY),Traitify.setHost(l.TRAITIFY_HOST),Traitify.setVersion(l.TRAITIFY_VERSION),traitify=Traitify.ui.load(e.traitifyId,".slide-deck",{slideDeck:{showResults:!1},results:{target:".results"},personalityTypes:{target:".personality-types"},personalityTraits:{target:".personality-traits"}}),traitify.slideDeck.onFinished(function(){i.finishTraitify(e.jobId,e.resumeId,e.traitifyId).then(function(t){o.go("traitifyfinish",{resumeId:e.resumeId,traitifyId:e.traitifyId,jobId:e.jobId})},function(e){console.log(e.data.message)})})}]),angular.module("Jobsite").controller("StartTraitifyController",["$scope","$http","$timeout","$location","AuthService","TraitifyService","$state","$stateParams",function(e,t,n,r,s,o,i,a){if(s.authentication.isAuth&&s.authentication.isUser)e.error_message="",e.jobId=a.jobId,e.resumeId=a.resumeId,e.traitifyId=a.traitifyId,o.getTraitify(e.jobId,e.resumeId,e.traitifyId).then(function(t){e.traitify=t.data},function(e){console.log(e.data.message)}),e.start=function(){return e.error_message="",0==e.traitify.slidesCount?void(e.error_message="Test does not have any questions!"):void(e.traitify.isFinish?e.error_message="You have already passed test!":i.go("traitify",{resumeId:e.resumeId,traitifyId:e.traitifyId,jobId:e.jobId}))};else{var l=r.path();sessionStorage.setItem("return_url",l),i.transitionTo("login")}}]),Array.prototype.diff=function(e){return this.filter(function(t){return e.indexOf(t)<0})},angular.module("Jobsite").controller("FinishTraitifyController",["$scope","$http","$timeout","$location","ScreeningsService","CategoriesService","ResumesService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.close=function(){a.go("dashboard")}}]),angular.module("Jobsite").controller("SendTraitifyRequestController",["$scope","$modalInstance","JobsService","TraitifyService","$sce","$timeout","$document","resume","jobId",function(e,t,n,r,s,o,i,a,l){e.resume=a,e.successMessage=!1,e.errorMessage=!1,e.slectedDeck="",n.getJob(l).then(function(t){response=t.data,e.job=response},function(e){console.log(e.data.message)}),r.getDecks().then(function(t){e.decks=t.data},function(e){console.log(e.data.message)}),e.onClose=function(){t.close()},e.notify=function(){r.sendTraitify(l,e.resume.id,{type:e.slectedDeck.type}).then(function(n){e.successMessage=!0,o(function(){t.close()},1e3)},function(t){e.errorMessage=!0})}}]),angular.module("Jobsite").controller("InterviewsController",["$scope","JobsService","InterviewsService","$sce","$timeout","$document",function(e,t,n,r,s,o){e.currentPage=1,e.entryLimits=[5,10,20,50,100],n.getInterviews().then(function(t){e.list=t.data,e.currentPage=1,e.entryLimit=10,e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)}),e.deleterecords=function(t){n.deleteInterview(t.id).then(function(n){e.list.splice(e.list.indexOf(t),1),e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)})},e.setPage=function(t){e.currentPage=t},e.filter=function(){s(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse}}]),angular.module("Jobsite").controller("EditInterviewController",["$scope","$http","$timeout","$location","InterviewsService","CategoriesService","JobsService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.id=l.id,e.currentPage=1,e.entryLimits=[5,10,20,50,100],e.entryLimit=10,s.getInterview(e.id).then(function(t){e.interview=t.data},function(e){console.log(e.data.message)});var c=function(){s.getInterviewQuestionsByInterviewId(e.id).then(function(t){e.interviewQuestions=t.data,e.currentPage=1,e.entryLimit=10,e.filteredItems=e.interviewQuestions.length,e.totalItems=e.interviewQuestions.length},function(e){console.log(e.data.message)})};c(),e.setPage=function(t){e.currentPage=t},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse},e.deleterecords=function(e){s.deleteInterviewQuestion(e.interviewId,e.id).then(function(e){c()},function(e){console.log(e.data.message)})}}]),angular.module("Jobsite").controller("CreateInterviewController",["$scope","$http","$timeout","$location","InterviewsService","CategoriesService","JobsService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.id=l.id,e.interview={},e.interview.sort=0,o.getCategories().then(function(t){e.categories=t.data},function(e){console.log(e.data.message)}),i.getMyJobs().then(function(t){e.jobs=t.data},function(e){console.log(e.data.message)}),angular.isUndefined(e.id)||""==e.id||s.getInterview(e.id).then(function(t){var n=t.data;e.interview.title=n.title,e.interview.description=n.description,e.interview.categoryId=n.categoryId,e.interview.jobsIds=n.jobsIds},function(e){console.log(e.data.message)}),e.saveChanges=function(t){t&&(angular.isUndefined(e.id)||""==e.id?s.postInterview(e.interview).then(function(t){e.saveAndExit?a.go("interviews"):a.go("createinterviewquestion",{id:t.data.id})},function(e){console.log(e.data.message)}):s.putInterview(e.id,e.interview).then(function(t){a.go("editinterview",{id:e.id})},function(e){console.log(e.data.message)}))},e.cancel=function(){angular.isUndefined(e.id)||""==e.id?a.go("interviews"):a.go("editinterview",{id:e.id})}}]),angular.module("Jobsite").controller("InterviewAssignController",["$scope","$http","$timeout","$location","$filter","InterviewsService","JobsService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.myInterviewId=l.id,e.selectedJobId="";var c=function(t){return s("filter")(e.interviews,{id:t})[0]},u=function(){var t=s("filter")(e.interviews,e.jobExist);return s("orderBy")(t,"sort")};o.getInterviews().then(function(t){e.interviews=t.data,e.myInterview=c(e.myInterviewId),i.getMyJobs().then(function(t){e.jobs=s("filter")(t.data,e.jobAlreadyAssign)},function(e){console.log(e.data.message)})},function(e){console.log(e.data.message)}),e.saveChanges=function(){o.putInterview(e.myInterviewId,e.myInterview).then(function(t){a.go("editinterview",{id:e.myInterviewId})},function(e){console.log(e.data.message)})},e.jobAlreadyAssign=function(t){return-1==e.myInterview.jobsIds.indexOf(t.id)},e.jobExist=function(t){return-1!=t.jobsIds.indexOf(e.selectedJobId)},e.addMyInterview=function(){if(-1==e.myInterview.jobsIds.indexOf(e.selectedJobId)){var t=e.myInterview.sort,n=u();null!=n&&n.length>0&&(t=n[n.length-1].sort,t++),e.myInterview.sort=t,e.myInterview.jobsIds.push(e.selectedJobId)}}}]),angular.module("Jobsite").controller("CreateInterviewQuestionController",["$scope","$http","$timeout","$location","InterviewsService","$state","$stateParams","RESOURCES",function(e,t,n,r,s,o,i,a){e.id=i.id,e.type=i.type,e.questionsCount=0,e.questionId=i.questionId,e.mode="create",angular.isUndefined(e.questionId)||""==e.questionId||(e.mode="edit"),e.interviewQuestion={},e.interviewQuestion.tags=[],e.ScreeningQuestionTypes=a.SCREENING_QUESTION_TYPES,e.interviewQuestion.options=[],e.interviewQuestion.optionsDescriptions={},e.numOptionsLikertScale=[3,5,7,9],e.numOptionsSelected="",s.getInterview(e.id).then(function(t){var n=t.data;e.questionsCount=n.questionsCount},function(e){console.log(e.data.message)}),"edit"==e.mode&&s.getInterviewQuestionById(e.id,e.questionId).then(function(t){e.interviewQuestion=t.data,(angular.isUndefined(e.interviewQuestion.tags)||null==e.interviewQuestion.tags)&&(e.interviewQuestion.tags=[]),"LikertScale"==e.interviewQuestion.type&&(e.numOptionsSelected=e.interviewQuestion.options.length)},function(e){console.log(e.data.message)}),e.saveChanges=function(t){t&&("TrueFalse"==e.interviewQuestion.type&&(e.interviewQuestion.options=[],e.interviewQuestion.answerText=""),"MultipleChoice"==e.interviewQuestion.type&&(e.interviewQuestion.answerText=""),"FillIn"==e.interviewQuestion.type&&(e.interviewQuestion.options=[]),"edit"==e.mode?s.putInterviewQuestion(e.id,e.questionId,e.interviewQuestion).then(function(t){e.saveAndExit?o.go("editinterview",{id:e.id}):(e.questionsCount++,e.interviewQuestion={},e.interviewQuestion.options=[],e.interviewQuestion.answerText="",e.interviewQuestion.tags=[],e.tag="",e.interviewQuestion.type="",e.option="")},function(e){console.log(e.data.message)}):s.postInterviewQuestion(e.id,e.interviewQuestion).then(function(t){e.saveAndExit?"editinterview"==e.type?o.go("editinterview",{id:e.id}):o.go("interviews"):(e.questionsCount++,e.interviewQuestion={},e.interviewQuestion.options=[],e.interviewQuestion.answerText="",e.interviewQuestion.tags=[],e.tag="",e.interviewQuestion.type="",e.option="")},function(e){console.log(e.data.message)}))},e.cancel=function(){o.go("interviews")},e.changedQuestionType=function(){"TrueFalse"==e.interviewQuestion.type?(e.interviewQuestion.options=["True","False"],e.option="",e.interviewQuestion.optionsDescriptions={}):"LikertScale"==e.interviewQuestion.type?(e.interviewQuestion.options=[],e.option="",e.interviewQuestion.optionsDescriptions={}):(e.interviewQuestion.options=[],e.option="",e.interviewQuestion.optionsDescriptions={})},e.addOption=function(){-1==e.interviewQuestion.options.indexOf(e.option)&&(e.interviewQuestion.options.push(e.option),e.option="")},e.removeOption=function(t){e.options.splice(t-1,1)},e.addtags=function(){-1==e.interviewQuestion.tags.indexOf(e.tag)&&(e.interviewQuestion.tags.push(e.tag),e.tag="")},e.removetag=function(t){e.interviewQuestion.tags.splice(t-1,1)},e.changedNumOptionsLikertScale=function(){if(e.interviewQuestion.options=[],e.interviewQuestion.optionsDescriptions={},e.numOptionsSelected&&parseInt(e.numOptionsSelected)>=3)for(var t=1;t<=parseInt(e.numOptionsSelected);t++)e.interviewQuestion.options.push(t),e.interviewQuestion.optionsDescriptions[t]=""}}]),angular.module("Jobsite").controller("SendInterviewController",["$scope","$modalInstance","JobsService","$state","InterviewsService","$sce","$timeout","$document","resume","jobId",function(e,t,n,r,s,o,i,a,l,c){e.resume=l,e.interviews=[],e.interviewSelected="",e.successMessage=!1,e.errorMessage=!1,n.getJob(c).then(function(t){response=t.data,e.job=response},function(e){console.log(e.data.message)}),s.getInterviews().then(function(t){response=t.data,e.interviews=response.filter(function(e){return-1!=e.jobsIds.indexOf(c)})},function(e){console.log(e.data.message)}),e.onClose=function(){t.close()},e.notify=function(){s.notifyInterviewCandidate(c,e.resume.id).then(function(t){e.successMessage=!0},function(t){e.errorMessage=!0})},e.startInterview=function(n){return n?void s.sendInterviewRequestToResume(c,e.resume.id,{interviewId:e.interviewSelected}).then(function(n){i(function(){t.close(),r.go("testinterview",{jobId:c,resumeId:e.resume.id,interviewId:e.interviewSelected})},1e3)},function(t){e.errorMessage=!0}):void(e.errorMessage=!0)}}]),angular.module("Jobsite").controller("TestInterviewController",["$scope","$rootScope","$http","$timeout","$location","InterviewsService","CategoriesService","ResumesService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l,c){e.jobId=c.jobId,e.resumeId=c.resumeId,e.interviewId=c.interviewId,e.successMessage="",e.errorMessage="",e.interview={},e.interviewQuestions={},e.resultQuestions=[],o.getInterviewByResumeId(e.jobId,e.resumeId,e.interviewId).then(function(t){e.interview=t.data,0==e.interview.questionsCount&&(e.errorMessage="Interview does not have any questions! Please try again later!"),o.getInterviewQuestions(e.jobId,e.resumeId,e.interviewId).then(function(t){e.interviewQuestions=t.data},function(e){console.log(e.data.message)})},function(e){console.log(e.data.message)}),e.saveChanges=function(t){if(e.successMessage="",!t)return void(e.errorMessage="Please fill out all mandatory fields!");e.errorMessage="";var n={results:e.resultQuestions};o.setAnswersOnInterviewQuestions(e.jobId,e.resumeId,e.interviewId,n).then(function(t){e.successMessage="Successfully saved!",r(function(){l.go("dashboard")},1e3)},function(t){e.errorMessage="Error occured",console.log(t.data.message)})}}]),angular.module("Jobsite").controller("ShowCoverController",["$scope","$modalInstance","JobsService","$state","$sce","$timeout","JobsService","$document","resume","jobId",function(e,t,n,r,s,o,n,i,a,l){e.resume=a,n.getJob(l).then(function(t){response=t.data,e.job=response},function(e){console.log(e.data.message)}),e.onClose=function(){t.close()}}]),angular.module("Jobsite").controller("SelectLoginRegisterController",["$scope","$modalInstance","JobsService","$state","InterviewsService","$sce","$timeout","$document","type",function(e,t,n,r,s,o,i,a,l){e.typeText="apply"==l?"applying for":"referring",e.isLogin=null,e.onClose=function(){t.close({isLogin:e.isLogin})},e.selectType=function(n){e.isLogin=n,t.close({isLogin:e.isLogin})}}]),angular.module("Jobsite").controller("UserDashboardController",["$rootScope","$scope","$stateParams","$location","$modal","$q","$http","$timeout","AuthService","JobsService","ReferralService","RESOURCES","cfpLoadingBar",function(e,t,n,r,s,o,i,a,l,c,u,d,g){t.role=l.authentication.isAdministrator?"Admin":"User";var f=n.jobId,m=n.resumeId,p=n.messageshow;if(!l.authentication.isAuth&&1==p&&m&&f&&(r.search("jobId",f),r.search("resumeId",m),r.search("messageshow",p),sessionStorage.setItem("return_url",r.path()),r.path("/login")),l.authentication.isUser){t.entryLimits=[5,10,15,20,25],t.isLoading=!0;var h=(d.API_BASE_PATH,function(){t.currentPage=1,t.entryLimit=10,t.filteredItems=t.list.length,t.totalItems=t.list.length});t.activeTab="JobDescription";var v=c.getJobsApplied(),b=u.getReferrals(),y=u.getReferences();o.all([v,b,y]).then(function(e){t.list=[],t.list=t.list.concat(e[0].data,e[1].data,e[2].data);for(var n=0;n<t.list.length;n++)t.list[n].activeTab=0;h(),t.isLoading=!1},function(e){console.log(e.data.message),t.isLoading=!1}),t.setPage=function(e){t.currentPage=e};var I=function(e,t,n){var r=s.open({animation:!0,templateUrl:"views/MessagesView.html",controller:"MessagesController",size:"lg",resolve:{resume:function(){return null},resumeId:function(){return t},jobId:function(){return e},job:function(){return n}}});null!=n&&r.result.then(function(e){n.messagesCount=0},function(){n.messagesCount=0})};1==p&&m&&f&&I(f,m,null),t.showMessages=function(e){I(e.id,e.resumeId,e)}}else r.path("/logout")}]),angular.module("Jobsite").controller("AdminDashboardController",["$rootScope","$scope","$location","$modal","$http","$timeout","AuthService","JobsService","ReferralService","RESOURCES","cfpLoadingBar",function(e,t,n,r,s,o,i,a,l,c,u){if(i.authentication.isAdministrator){t.role=i.authentication.isAdministrator?"Admin":"User",t.entryLimits=[5,10,15,20,25],t.isLoading=!0;var d=(c.API_BASE_PATH,function(){t.currentPage=1,t.entryLimit=10,t.filteredItems=t.list.length,t.totalItems=t.list.length});t.headingmessage="Jobs Posted",t.viewtext="View Applicants",t.jobsNotFoundMessage="No jobs",a.getMyJobs().then(function(e){t.list=e.data,d(),t.isLoading=!1},function(e){console.log(e.data.message),t.isLoading=!1}),t.deleterecords=function(e){a.deleteJob(e).then(function(e){a.getMyJobs().then(function(e){t.list=e.data,d()},function(e){console.log(e.data.message)})},function(e){console.log(e.data.message)})},t.setPage=function(e){t.currentPage=e},t.changeActivity=function(e,t){var n={isInActive:t};a.changeActivity(e.id,n).then(function(n){e.isInActive=t},function(e){console.log(e.data.message)})}}else n.path("/logout")}]),angular.module("Jobsite").controller("SendReferralPartialController",["$scope","JobsService","ScreeningsService","$sce","$timeout","$document","ReferralService","RESOURCES",function(e,t,n,r,s,o,i,a){e.job={},e.successMessage="",e.message="",e.yearsList=[];for(var l=1;20>=l;l++)e.yearsList.push(l);var c=function(){e.emailObjects=[];for(var t=0;1>t;t++)e.emailObjects.push({email:"",firstName:"",lastName:"",years:"",personTitle:"",isWorkedTogether:""})};c(),e.onSave=function(t){if(e.message="",e.successMessage="",!t)return void(e.message="Check input data!");for(var n=!1,r=0;r<e.emailObjects.length;r++){var o=e.emailObjects[r];angular.isUndefined(o.email)||null==o.email||""==o.email||(n=!0)}if(!n)return void(e.message="You do not fill emails!");var a={jobId:e.job.jobId,recepients:e.emailObjects};i.postReferral(a).then(function(t){c(),e.successMessage="Successfully sent!",s(function(){e.successMessage=""},1e3)},function(t){e.message="Error occured!",t.data&&(e.message=t.data),console.log(t.data.message)})}}]),angular.module("Jobsite").controller("ClientsController",["$scope","$http","$timeout","$location","RESOURCES","ClientsService",function(e,t,n,r,s,o){e.currentPage=1,e.entryLimits=[5,10,20,50,100],o.getClients().then(function(t){e.list=t.data;for(var n=0;n<e.list.length;n++)e.list[n].personalName=e.list[n].firstName+" "+e.list[n].lastName;e.currentPage=1,e.entryLimit=10,e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)}),e.deleterecords=function(t){o.deleteClient(t.id).then(function(n){e.list.splice(e.list.indexOf(t),1),e.filteredItems=e.list.length,e.totalItems=e.list.length},function(e){console.log(e.data.message)})},e.setPage=function(t){e.currentPage=t},e.filter=function(){n(function(){e.filteredItems=e.filtered.length},10)},e.sort_by=function(t){e.predicate=t,e.reverse=!e.reverse}}]),angular.module("Jobsite").controller("CreateClientController",["$scope","$http","$timeout","$location","ClientsService","$state","$stateParams",function(e,t,n,r,s,o,i){e.id=i.id,e.client={},angular.isUndefined(e.id)||""==e.id||s.getClient(e.id).then(function(t){e.client=t.data,e.client.phone=parseInt(t.data.phone),e.client.zipCode=parseInt(t.data.zipCode)},function(e){console.log(e.data.message)}),e.saveChanges=function(t){t&&(angular.isUndefined(e.id)||""==e.id?s.postClient(e.client).then(function(e){o.go("clients")},function(e){console.log(e.data.message)}):s.putClient(e.id,e.client).then(function(e){o.go("clients")},function(e){console.log(e.data.message)}))},e.cancel=function(){o.go("clients")}}]),angular.module("Jobsite").controller("ManageTagsController",["$scope","$modalInstance","JobsService","ScreeningsService","$sce","$timeout","$document","screening","$filter",function(e,t,n,r,s,o,i,a,l){e.screening=a,e.tags=e.screening.tags,e.tags&&0!=e.tags.length||(e.tags=[]),e.types=[{value:!0,name:"Category"},{value:!1,name:"Value"}],e.type="",e.levels=[1,2,3],e.level="",e.name="",e.parentName="",e.parents=[],e.levelTags=[],e.errorMessage="",e.onClose=function(){t.close()};var c=function(t){var n=l("filter")(e.parents,{name:t})[0];return parseInt(n.level)},u=function(t){var n=l("filter")(e.tags,{name:t.name,level:t.level,parentName:t.parentName});return n.length>0};e.addTag=function(t){if(e.errorMessage="",!t)return void(e.errorMessage="You don't fill all fields");var n={name:e.name,isCategory:"true"==e.type,level:1};return e.parentName&&""!=e.parentName&&(n.parentName=e.parentName,n.level=c(e.parentName)+1),u(n)?void(e.errorMessage="Tag with same name already exist!"):(e.tags.push(n),e.type="",
e.name="",e.parentName="",e.level="",e.parents=[],void(e.levelTags=[]))},e.onSave=function(n){t.close({tags:e.tags})},e.levelChanged=function(){e.parents=l("filter")(e.tags,{level:e.level,isCategory:!0}),e.parentName=""},e.parentChanged=function(){if(e.levelTags=[],e.parentName)for(var t=c(e.parentName)+1,n=l("filter")(e.tags,{parentName:e.parentName,level:t}),r=0;r<n.length;r++)e.levelTags.push(n[r].name)}}]),angular.module("Jobsite").controller("MessagesController",["$scope","$modalInstance","JobsService","ResumesService","$state","InterviewsService","MessagesService","AuthService","$sce","$timeout","$document","resume","jobId","resumeId","job",function(e,t,n,r,s,o,i,a,l,c,u,d,g,f,m){e.jobId=g,e.resumeId=f,e.successMessage=!1,e.errorMessage="",e.newMessage={subject:"",body:""},e.selectedMessageTemplate={},e.isSaveTemplate=!1,e.nameTemplate="",e.isAdmin=a.authentication.isAdministrator,e.isAdmin?null!=d?(e.resume=d,e.toUserName=e.resume.firstName+" "+e.resume.lastName):r.getResume(e.resumeId).then(function(t){response=t.data,e.resume=response,e.toUserName=e.resume.firstName+" "+e.resume.lastName},function(e){console.log(e.data.message)}):e.toUserName="Emplorer",null!=m?e.job=m:n.getJob(e.jobId).then(function(t){response=t.data,e.job=response},function(e){console.log(e.data.message)}),i.getMessages(e.jobId,e.resumeId).then(function(t){e.messages=t.data,e.messages.length>0&&(e.messages[e.messages.length-1].open=!0)},function(e){console.log(e.data.message)}),i.getMessageTemplates().then(function(t){e.messageTemplates=t.data},function(e){console.log(e.data.message)});var p=function(){var t={jobId:e.jobId,resumeId:e.resumeId,subject:e.newMessage.subject,body:e.newMessage.body};i.sendMessage(t).then(function(t){var n=t.data;e.messages.push(n),e.successMessage=!0,e.newMessage.subject="",e.newMessage.body="",e.selectedMessageTemplate={},e.isSaveTemplate=!1,e.nameTemplate="",c(function(){e.successMessage=!1},1e3)},function(t){e.errorMessage="Try again",console.log(t.data.message)})};e.send=function(t){if(e.successMessage=!1,e.errorMessage="",!t)return void(e.errorMessage="You don't fill mandatory fields");if(e.isSaveTemplate&&!e.nameTemplate)return void(e.errorMessage="You don't fill Name Template");if(e.isSaveTemplate){var n={name:e.nameTemplate,subject:e.newMessage.subject,body:e.newMessage.body};i.postMessageTemplate(n).then(function(t){var n=t.data;e.messageTemplates.push(n),p()},function(t){e.errorMessage="Can not save template",console.log(t.data.message)})}else p()},e.cancel=function(){t.close()},e.onClose=function(){t.close()},e.messageTemplateChanged=function(t){e.selectedMessageTemplate?(e.newMessage.subject=e.selectedMessageTemplate.subject,e.newMessage.body=e.selectedMessageTemplate.body):(e.newMessage.subject="",e.newMessage.body="")},e.reply=function(t){if(t.successMessage=!1,t.errorMessage="",!t.replyBody)return void(t.errorMessage="You don't fill mandatory fields");var n={jobId:t.jobId,resumeId:t.resumeId,subject:t.subject,body:t.replyBody};i.sendMessage(n).then(function(n){e.messages.push(n.data),t.replyBody="",t.showReply=!1,c(function(){t.successMessage=!0},1e3)},function(e){t.errorMessage="Try again",console.log(e.data.message)})},e.replyCancel=function(e){e.successMessage=!1,e.errorMessage="",e.replyBody="",e.showReply=!1},e.isCollapse=!0,e.showAllItems=function(t){t.collapse&&(t.collapse=!1,e.isCollapse=!1)},e.collapseFilter=function(t,n,r){var s=r.length;if(5>=s)return e.isCollapse=!1,!0;if(!e.isCollapse)return!0;var o=4,i=s-3;return n==i?(t.collapse=!0,t.collapseCount=i-o+1,!0):o>n||n>i}}]),angular.module("Jobsite").controller("MessagesBulkController",["$scope","JobsService","$state","InterviewsService","MessagesService","JobsService","$sce","$timeout","$document","$state",function(e,t,n,r,s,t,o,i,a,n){e.selectedJobId="",e.successMessage=!1,e.errorMessage="",e.newMessage={subject:"",body:""},e.selectedMessageTemplate={},e.isSaveTemplate=!1,e.nameTemplate="",t.getMyJobs().then(function(t){e.jobs=t.data},function(e){console.log(e.data.message)}),s.getMessageTemplates().then(function(t){e.messageTemplates=t.data},function(e){console.log(e.data.message)});var l=function(){var t={jobId:e.selectedJobId,subject:e.newMessage.subject,body:e.newMessage.body};s.sendBulkMessage(t).then(function(t){e.successMessage=!0,e.newMessage.subject="",e.newMessage.body="",i(function(){e.successMessage=!1,n.go("dashboard")},1e3)},function(t){e.errorMessage="Try again",console.log(t.data.message)})};e.send=function(t){if(e.successMessage=!1,e.errorMessage="",!t)return void(e.errorMessage="You don't fill mandatory fields");if(e.isSaveTemplate&&!e.nameTemplate)return void(e.errorMessage="You don't fill Name Template");if(e.isSaveTemplate){var n={name:e.nameTemplate,subject:e.newMessage.subject,body:e.newMessage.body};s.postMessageTemplate(n).then(function(t){var n=t.data;e.messageTemplates.push(n),l()},function(t){e.errorMessage="Can not save template",console.log(t.data.message)})}else l()},e.cancel=function(){n.go("dashboard")},e.messageTemplateChanged=function(t){e.selectedMessageTemplate?(e.newMessage.subject=e.selectedMessageTemplate.subject,e.newMessage.body=e.selectedMessageTemplate.body):(e.newMessage.subject="",e.newMessage.body="")}}]),angular.module("Jobsite").controller("FinishTestJobReferralController",["$scope","$http","$timeout","$location","ReferralService","CategoriesService","ResumesService","$state","$stateParams",function(e,t,n,r,s,o,i,a,l){e.jobId=l.jobId,e.resumeId=l.resumeId,e.jobReferralId=l.jobReferralId,e.successMessage="",e.errorMessage="",e.reference={},s.getReferenceByResumeId(e.jobId,e.resumeId,e.jobReferralId).then(function(t){e.reference=t.data},function(e){console.log(e.data.message)}),e.close=function(){a.go("dashboard")},e.addRecepient=function(){e.emailObjects.length>=2||e.emailObjects.push({email:"",firstName:"",lastName:"",years:0,personTitle:"",workingRelationshipType:"Colleague"})},e.removeRecepient=function(t){e.emailObjects.length<=1||e.emailObjects.splice(t,1)};var c=function(){e.emailObjects=[];for(var t=0;1>t;t++)e.emailObjects.push({email:"",firstName:"",lastName:"",years:0,personTitle:"",workingRelationshipType:"Colleague"})};c(),e.onSave=function(t){if(e.successMessage="",e.errorMessage="",!t)return void(e.errorMessage="Check input data!");for(var r=!1,o=0;o<e.emailObjects.length;o++){var i=e.emailObjects[o];angular.isUndefined(i.email)||null==i.email||""==i.email||(r=!0)}if(!r)return void(e.errorMessage="You do not fill emails!");var l={jobId:e.jobId,recepients:e.emailObjects},l={jobId:e.jobId,resumeId:e.resumeId,referenceId:e.jobReferralId,recepients:e.emailObjects};s.sendReferenceToFriends(l).then(function(t){e.successMessage="References sended successfully!",n(function(){e.successMessage="",a.go("dashboard")},1e3)},function(t){e.errorMessage="Error occured!",console.log(t.data.message)})}}]);